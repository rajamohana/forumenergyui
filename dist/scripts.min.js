"use strict";!function(){angular.module("cyient.filters",[]).filter("setDecimal",["$filter",function(t){return function(t,e){if(isNaN(t))return t;var a="1"+Array(+(e>0&&e+1)).join("0");return t=Math.round(t*a)/a,t>0?t:null}}]).filter("firstLetterUppercase",[function(){return function(t){if(t)return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}}]).filter("dateToString",["$filter",function(t){return function(e){if(e){var a=new Date(e.split("/").reverse().join("-")),r=t("date")(a,"d MMM yyyy");return r}}}]).filter("round",[function(){return function(t){return Math.round(t)}}]).filter("roundTo",[function(){return function(t,e){return"number"!=typeof t?t:_.round(t,e)}}]).filter("ceil",[function(){return function(t){return Math.ceil(t)}}]).filter("floor",[function(){return function(t){return Math.floor(t)}}]).filter("abs",[function(){return function(t){return Math.abs(t)}}])}(),function(){function t(t){return t("data/assets.json",{},{getData:{method:"GET",isArray:!1}})}function e(t,e){var a={},r="assets/images/",i=this;return e.getData(function(t){i.data=t}),a.getAssetPath=function(t){var e="",a=i.data;if(t)for(var n in a)n===t&&(e=a[n]);return r+e},a}angular.module("cyient.assetService",[]).factory("AssetsFactory",t).factory("AssetService",e),t.$inject=["$resource"],e.$inject=["$resource","AssetsFactory"]}(),function(){function t(t){return p+v[t]}function e(e,a,r,i,n,s){var o={},l={};f.classPath="",f.classPath="spark.jobserver."+n.login;var c=g?m.login:t("login"),u=null;return o.isAuthenticated=function(){var t=s.getObject("login-token");return!!t},o.getUserDetails=function(t){return a.post(c,t).then(function(t){if(200==t.status){var e=t.data;return s.putObject("login-token",e.Authorization),e}Promise.reject(t)},function(t){Promise.reject(t)})},o.setData=function(t){l=t},o.getData=function(){return l},o.forgotPassword=function(t){return u=e.defer(),a.post(n.forgotPassword,{params:{username:t}}).then(function(t){"ERROR"!==t.status&&u.resolve(data)},function(t){r.warn("Forgot password. Try again ...")}),u.promise},o}function a(t,e,a,r,i){var n=t.defer();f.classPath="",f.classPath="spark.jobserver."+i.sites;g?m.sites:p+r(f);return{getSites:function(t){return e.get("data/getsitesdataoutput.json").then(function(t){return"ERROR"===t.status?n.reject(t):void n.resolve(t)}),n.promise}}}function r(t,e,a,r,i){var n=null,s={};return{getAllTrucks:function(a,s,o,l,c){o="All",f.classPath="spark.jobserver."+i.trucks;var u={userId:a,siteId:s,sort:c,filter:l,type:o};g?m.trucks+r(u):p+r(f);return n=t.defer(),e.get("data/gettrucksdataoutput-all2.json").then(function(t){return"ERROR"===t.status?n.reject(t):void n.resolve(t)}),n.promise},getSiteData:function(t,a){return e.get("data/getsitesdataoutput.json").then(function(t){return"ERROR"!==t.status?t:void Promise.reject(t)})},getParametersData:function(s,o,l,c){f.classPath="spark.jobserver."+i.parametersData;var u=p+r(f),d={userId:s,siteId:o,truckNumber:l,paramName:c};return n=t.defer(),e.post(u,d).then(function(t){"ERROR"!==t.status&&n.resolve(t)},function(t){a.warn("Unable to retrieve parameter data ...")}),n.promise},setData:function(t){s=t},getData:function(t){var e={},a=Object.keys(s).length;if(0!==a)var e=s.filter(function(e){return e.siteId==t});return e[0]},cancelRequest:function(){n&&n.resolve("Cancel request ...")}}}function i(e,a,r,i,n,s){var o=null;return f.classPath="",{getTruck:function(e,r){var i=s.getObject("login-token"),n={headers:{Authorization:i}},o=g?m.assetGroups:t("assetDetails");o+=e;return a.get(o,n).then(function(t){return 200==t.status?t.data.result?t.data.result:t.data:void Promise.reject(t)})},cancelRequest:function(){o.resolve("Cancel request ...")},getChartData:function(e,r){var i=s.getObject("login-token"),n={headers:{Authorization:i}},o=g?m.assetGroups:t("assetDetailsChart");return o+=e,a.get(o,n).then(function(t){return 200==t.status?t.data:void Promise.reject(t)})},getCategories:function(t){var e;return e="catwalk"==t?"data/categories-catwalk.json":"data/categories-fracpump.json",a.get(e).then(function(t){return"ERROR"!==t.status?t:void Promise.reject(t)})}}}function n(e,a,r,i,n){return{getData:function(r,i,s,o,l,c){var u=n.getObject("login-token"),d={headers:{Authorization:u}},p=g?m.assetGroups:t("secondsData"),h={userId:r,siteId:i,assetId:s,assetType:l,categoryId:o,sensorNames:c};h.sensorNames=["inletTemp","outletTemp"];var f=e.defer();return a.post(p,h,d).then(function(t){if("ERROR"!==t.status){var e=t.data.map(function(t){return t});f.resolve(e)}},function(t){f.reject("ERROR")}),f.promise},getDaysData:function(r,i,s,o,l,c){var u=n.getObject("login-token"),d={headers:{Authorization:u}},p=g?m.assetGroups:t("hoursData"),h={userId:r,siteId:i,assetId:s,assetType:o,categoryId:l,sensorNames:c},f=e.defer();return a.post(p,h,d).then(function(t){if("ERROR"!==t.status){var e=t.data.map(function(t){return t});f.resolve(e)}},function(t){f.reject("ERROR")}),f.promise}}}function s(t,e,a,r,i,n,s){return{getDefaultData:function(r){var i=(s.getObject("login-token"),g?m.assetGroups:h+v.whatIfScenarios);i=i+"/"+r;var n=t.defer();return e.get(i).then(function(t){var e=t.data;n.resolve(e)},function(t){a.warn("Unable to retrieve data ...")}),n.promise},tweakParameter:function(n,s,o,l){f.classPath="spark.jobserver."+i.whatIfTweakData;var c=p+r(f),u={userId:n,siteId:s,truckNumber:o,payload:l.payload,fuelConsumption:l.fuelConsumption,gearShiftCount:l.gearShiftCount,binOrDate:"Date"},d=t.defer();return e.post(c,u).then(function(t){if("ERROR"!==t.status){var e=JSON.parse(t.data.result[0]);d.resolve(e)}},function(t){a.warn("Unable to retrieve data ...")}),d.promise},loadScenarios:function(r,i,n){var s=t.defer();return e.get("data/whatif-second.json").then(function(t){if("ERROR"!==t.status){var e=t.data.result.map(function(t){return t});s.resolve(e)}},function(t){a.warn("Unable to retrieve data ...")}),s.promise},saveNewScenario:function(n,s,o,l,c){f.classPath="spark.jobserver."+i.whatIfSaveNewScenario;var u=p+r(f),d={scenarioName:l,userId:n,siteId:s,truckNumber:o,payload:c.payload,fuelConsumption:c.fuelConsumption,gearShiftCount:c.gearShiftCount},h=t.defer();return e.post(u,d).then(function(t){if("ERROR"!==t.status){JSON.parse(t.data.result).status;h.resolve(t)}},function(t){a.warn("Unable to save scenario ...")}),h.promise}}}function o(){var t={ws:new WebSocket("ws://"+d+":8089"),send:function(e){e=JSON.stringify(e),t.ws.send(e)},onmessage:function(e){t.ws.onmessage=e}};return t.ws.onopen=function(t){},t.ws.onerror=function(e){setTimeout(function(){t.ws=new WebSocket("ws://apiPath:8089")},1e3)},t.ws.onclose=function(e){setTimeout(function(){t.ws=new WebSocket("ws://apiPath:8089")},1e3)},t}function l(e,a,r,i,n,s){e.defer();f.classPath="",f.classPath="spark.jobserver."+n.sites;g?m.sites:p+i(f);return{getSites:function(){var e=s.getObject("login-token"),i=s.getObject("loginData"),n={headers:{Authorization:e,userId:i.userId}},o=g?m.assetGroups:t("assetGroups");return a.get(o,n).then(function(t){if(200==t.status)return t.data},function(t){r.warn("Cannot retrieve sites ...")})},getAssetGrp:function(e){var r=s.getObject("login-token"),i={headers:{Authorization:r}},n=g?m.assetGroups:t("assetGroup");return n+=e,a.get(n,i).then(function(t){return 200==t.status?t.data:void Promise.reject(t)})},getFracSite:function(){var e=s.getObject("login-token"),r={headers:{Authorization:e}},i=g?m.assetGroups:t("assetGroup");return a.get(i,r).then(function(t){return 200==t.status?t.data:void Promise.reject(t)})}}}function c(e,a,r,i,n,s){e.defer();f.classPath="",f.classPath="spark.jobserver."+n.sites;g?m.sites:p+i(f);return{getSites:function(e){var r=s.getObject("login-token"),i=s.getObject("loginData"),n={headers:{Authorization:r,userId:i.userId}},o=g?m.assetGroups:t("assets");return a.get(o,n).then(function(t){return 200==t.status?t.data:void Promise.reject(t)})}}}function u(e,a,r,i){var n={};return n.getGeoData=function(){var e=i.getObject("login-token"),r=i.getObject("loginData"),n={headers:{Authorization:e,userId:r.userId}},s=g?m.assetGroups:t("geography");return a.get(s,n).then(function(t){return 200==t.status?t.data:void Promise.reject(t)})},n}var d="54.210.193.228",p="http://"+d+":8081/forumenergyweb",h=p,f={appName:"am102",context:"sql-contex1",sync:!0,timeout:60},g=!1,m={login:"/login",sites:"/api/sites",trucks:"/api/trucks?",truck:"/api/truck?",parametersData:"/api/params",insightsData:"/api/insights",whatIfDefaultData:"/api/whatifdefault",whatIfTweakData:"/api/whatif",whatIfLoadScenarios:"/api/whatif",whatIfSaveNewScenario:"/api/whatif`",forgotPassword:"/api/forgotPassword"},v={login:"/login",assetGroups:"/assetGroups/assetGroup",assetGroup:"/assetGroups/assetGroupdetailsUser/",assets:"/assets/assetsuser/",assetDetails:"/assets/assetDetails/",assetDetailsChart:"/assets/assetDetails/chartData/",geography:"/assetGroups/geographicData",secondsData:"/category/fracType?filter=5hrs",hoursData:"/category/fracType?filter=30days",whatIfScenarios:"/whatIfScenarios"};angular.module("cyient.urls",[]).constant("Endpoints",{login:"loginAM",sites:"GetSitesDataAM",trucks:"callfourAM3",truck:"callTen",parametersData:"GetParametersDataAM",insightsData:"Variable_Payload",whatIfDefaultData:"WhatIfFirstAM3",whatIfTweakData:"WhatIfNext",whatIfLoadScenarios:"scenarioLoadAM",whatIfSaveNewScenario:"scenarioSaveAM2",forgotPassword:"/api/forgotPassword"}),angular.module("cyient.backendservice",["cyient.urls"]).factory("LoginService",e).factory("DashboardService",a).factory("SiteDetailsService",r).factory("TruckDetailsService",i).factory("InsightsService",n).factory("WhatIfScenarioService",s).factory("SocketAPIService",o).factory("AllSitesService",l).factory("AllAssetsService",c).factory("GeographyService",u),e.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints","$cookies"],a.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints"],r.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints"],i.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints","$cookies"],n.$inject=["$q","$http","$httpParamSerializer","Endpoints","$cookies"],s.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints","$timeout","$cookies"],o.$inject=[],l.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints","$cookies"],c.$inject=["$q","$http","$log","$httpParamSerializer","Endpoints","$cookies"],u.$inject=["$q","$http","$log","$cookies"]}(),angular.module("cyient.areachart",[]).directive("areaChart",["$window","$log",function(t,e){return{scope:{compressedMode:"=",tripVals:"=",xlabel:"=",ylabel:"=",bandMin:"=",bandMax:"=",height:"@"},restrict:"AE",templateUrl:"directives/areaChart/areachart.html",link:function(e,a,r){function i(){function t(){U.insert("rect",":first-child").attr("class","brush-lbgc").attr("x",0).attr("y",-4).attr("width",.05*f).attr("height",m+4),U.insert("rect",":first-child").attr("class","brush-rbgc").attr("x",.95*f).attr("y",-4).attr("width",.05*f).attr("height",m+4)}function r(){v.domain(S.empty()?y.domain():S.extent());var t=S.extent();N.selectAll(".site-avg-line").attr("d",I),R.select(".x.axis").call(w);U.select(".brush-lbgc").attr("width",y(t[0])),U.select(".brush-rbgc").attr("x",y(t[1])).attr("width",f-y(t[1]))}function i(){U.selectAll(".resize").append("line").attr("x1",0).attr("y1",-4).attr("x2",0).attr("y2",m).attr("stroke","#3A4555").attr("stroke-width",1).attr("fill","#3A4555");var t=8,e=22;U.selectAll(".resize").append("rect").attr("x",-t/2).attr("y",0).attr("rx",t/2).attr("ry",t/2).attr("width",t).attr("height",e).attr("transform","translate(0,"+(m/2-e/2)+")").attr("stroke","#fff").attr("stroke-width",1).attr("fill","#3A4555")}function s(t){if(e.xVal=t,e.siteAvgY=_.find(e.tripVals,function(e){return e[c]===t})[u],e.siteAvgY=parseFloat(e.siteAvgY).toFixed(2),e.old!=e.siteAvgY){G.attr("transform","translate("+v(t)+",0)"),V.attr("transform","translate("+v(t)+", "+x(e.siteAvgY)+")");var a=!e.showTripsAvg&&!e.showSiteAvg&&!e.showTrips||!1,r=!e.showTrips||!1;G.classed("hide-node",a),V.classed("hide-node",r),e.old=e.siteAvgY}}function o(){G.classed("hide-node",!0),V.classed("hide-node",!0),e.xVal=null,e.tripAvgY=null,e.tripY=null,e.siteAvgY=null}if(e.tripAvgVals||e.siteAvgVals||e.tripVals){d3.select(n).select("svg").text("");var l,c="xValue",u="yValue",d="area-clip-"+_.random(0,1e4);l=e.compressedMode?$(a).width()-250:$(a).width()-200;var p={top:10,right:10,bottom:150,left:55},h={top:180,right:10,bottom:20,left:55},f=l+100,g=300-p.top-p.bottom,m=300-h.top-h.bottom;e.compressedMode||(g-=10,m-=10),e.compressedMode||(h.top+=30,g+=50);var v=d3.scale.linear().range([0,f]),y=d3.scale.linear().range([0,f]),x=d3.scale.linear().range([g,0]),b=d3.scale.linear().range([m,0]),k=5;if(e.compressedMode)var w=d3.svg.axis().scale(v).orient("bottom").outerTickSize(0).ticks(5).tickFormat(function(){return k-=1,k+"hrs"});else var w=d3.svg.axis().scale(v).orient("bottom").outerTickSize(0).ticks(0);var A=31,T=d3.svg.axis().scale(y).orient("bottom").outerTickSize(0).ticks(30).tickFormat(function(t){return A-=1}),L=d3.svg.axis().scale(x).orient("left").outerTickSize(0).ticks(e.compressedMode?5:6).tickFormat(function(t){var e=t;return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}),S=d3.svg.brush().x(y).on("brush",r).extent([.95,.05]),D=d3.svg.line().interpolate("monotone").x(function(t){return y(t[c])}).y(function(t){return b(t[u])}),O=d3.select(n).select("svg").attr("width",f+p.left+p.right).attr("height",g+p.top+p.bottom);O.append("defs").append("clipPath").attr("id",d).append("rect").attr("x",0).attr("y",0).attr("width",f).attr("height",g);var R=O.append("g").attr("class","focus-cnt").attr("transform","translate("+p.left+","+p.top+")"),C=R.append("g").attr("class","focus-graphs-cnt").attr("clip-path","url(#"+d+")"),P=O.append("g").attr("class","context-cnt").attr("transform","translate("+h.left+","+h.top+")");if(e.compressedMode){var M=e.xlabel+" (last 5 hrs)";R.append("text").attr("class","label-text").style("text-anchor","middle").text(M).attr("transform",function(){var t=f/2,a=e.compressedMode?g+27:g+65;return"translate("+t+","+a+")"})}else{var M=e.xlabel+" (last 30 days)";R.append("text").attr("class","label-text").style("text-anchor","middle").text(M).attr("transform",function(){var t=f/2,a=e.compressedMode?g+27:g+145;return"translate("+t+","+a+")"})}O.append("text").attr("class","label-text").attr("dy","3em").style("text-anchor","middle").text(e.ylabel).attr("transform",function(){var t=e.compressedMode?-20:-30,a=g/2,r=-90;return"translate("+t+","+a+")rotate("+r+")"});v.domain(d3.extent([].concat(e.tripVals.map(function(t){return t[c]})))),x.domain([0,d3.max([].concat(e.tripVals.map(function(t){return t[u]}),[e.bandMax]))]),y.domain(v.domain()),b.domain(x.domain());var N=C.append("g").attr("class","trips-grp"),I=d3.svg.line().interpolate("monotone").x(function(t){return v(t[c])}).y(function(t){return x(t[u])}),E=N.append("path").datum(e.tripVals).attr("class","site-avg-line").attr("d",I).attr("fill","#4bb3ba");E.node().getTotalLength();C.append("g").selectAll("circle").data(e.tripVals).enter().append("circle").attr("class","trip-circles").attr("r",3.5).attr("cx",function(t){return v(t[c])}).attr("cy",function(t){return x(t[u])}).on("mouseover",function(t){var a=t[c];s(a),e.$apply()}).on("mouseout",function(t){o(),e.$apply()}),R.append("g").attr("class","x axis").attr("transform","translate(0,"+g+")").call(w).selectAll("text").attr("y",9).attr("x",1),R.append("g").attr("class","y axis").call(L),P.append("path").datum(e.tripVals).attr("class","mini-arc").attr("d",D),P.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(T);var U=P.append("g").attr("class","x brush").call(S);U.selectAll("rect").attr("y",-6).attr("height",m+7),i(),t();var G=C.append("line").attr("class","hover-line").style("stroke","black").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",g).classed("hide-node",!0),V=C.append("circle").attr("class","siteavg-circles-hover").attr("r",3.5).attr("cx",0).attr("cy",0).classed("hide-node",!0);e.showTripsAvg=!0,e.showTrips=!0,e.showOptimalValue=!0,e.showSiteAvg=!0,e.toggleTripsAvgGraph=function(){e.showTripsAvg?d3.select(n).select(".trips-avg-line").classed("hide-node",!1):(d3.select(n).select(".trips-avg-line").classed("hide-node",!0),d3.select(n).select(".tripavg-circles-hover").classed("hide-node",!0))},e.toggleTripsGraph=function(){e.showTrips?d3.select(n).select(".trips-grp").classed("hide-node",!1):d3.select(n).select(".trips-grp").classed("hide-node",!0)},e.toggleOptimalValueGraph=function(){},e.toggleSiteAvgGraph=function(){e.showSiteAvg?d3.select(n).select(".site-avg-line").classed("hide-node",!1):(d3.select(n).select(".site-avg-line").classed("hide-node",!0),d3.select(n).select(".siteavg-circles-hover").classed("hide-node",!0))}}}var n=a[0];e.$watch("tripVals",function(t,e){i()},!0),angular.element(t).bind("resize",function(){t.innerWidth>=1024&&(i(),e.$digest())})}}}]),angular.module("cyient.barcharthoriz",[]).directive("barChartHoriz",["$sce",function(t){return{scope:{data:"="},restrict:"AE",templateUrl:"directives/barChartHoriz/barcharthoriz.html",link:function(e,a,r){e.sumVal=_.sumBy(e.data,"val"),e.renderHTML=function(e){return t.trustAsHtml(e)}}}}]),angular.module("cyient.donut",[]).directive("donut",[function(){return{scope:{type:"=",mode:"=",data:"=",numVal:"=",numLabel:"=",totalVal:"=",bottomLabel:"=",valLabel:"=",colorLabel:"="},restrict:"AE",link:function(t,e,a){var r=e[0],i=e.width(),n=e.width(),s=i/2,o=d3.layout.pie().sort(null).value(function(e){return e[t.valLabel]}),l=d3.svg.arc().innerRadius(s-10).outerRadius(s),c=d3.select(r).append("svg").attr("width",i).attr("height",n).append("g").attr("class",function(){if(s<50)return"small-donut"}).attr("transform","translate("+i/2+","+n/2+")");c.selectAll("path").data(o(t.data)).enter().append("path").attr("fill",function(e){return e.data[t.colorLabel]}).attr("d",l).transition().duration(1500).attrTween("d",function(t){var e=d3.interpolate(t.startAngle+.1,t.endAngle);return function(a){return t.endAngle=e(a),l(t)}});if("type1"===t.type){var u=c.append("g").attr("text-anchor","middle").attr("transform","translate(0, 15)");if("small"===t.mode)u.append("text").attr("transform","translate(0, -16)").attr("fill","#2aaef9").attr("font-family","OpenSansSemiBold").attr("font-size",20).text(t.numVal),u.append("line").attr("shape-rendering","crispEdges").attr("stroke-width","1").attr("stroke","#72787e").attr("x1",-10).attr("y1",0).attr("x2",10).attr("y2",0).attr("transform","translate(0, -12)"),u.append("text").attr("font-size",10).text(t.totalVal);else if("big"===t.mode){var d=u.append("g").attr("transform","translate(0, -25)");d.append("text").attr("transform","translate(0, 5)").attr("font-family","OpenSansSemiBold").attr("fill","#2aaef9").attr("font-size",35).text(t.numVal),u.append("text").attr("font-size","12").text(t.totalVal+" across site")}}else if("type2"===t.type){var u=c.append("g").attr("text-anchor","middle").attr("transform","translate(0, 8)");u.append("text").attr("class","overload-text").text(t.numVal)}}}}]),angular.module("cyient.dropdown",["angular-click-outside"]).directive("dropdown",[function(){return{scope:{tabs:"=",numAllTrucks:"=",numCriticalTrucks:"=",numStableTrucks:"=",numGoodTrucks:"=",onCategoryChange:"&"},restrict:"AE",templateUrl:"directives/dropdown/dropdown.html",link:function(t,e,a){t.$watch("tabs",function(e,a){"All"===t.tabs.activeTab?(t.category="all",t.numTrucks=t.numAllTrucks):"critical"===t.tabs.activeTab?(t.category="critical",t.numTrucks=t.numCriticalTrucks):"monitor"===t.tabs.activeTab?(t.category="stable",t.numTrucks=t.numStableTrucks):"good"===t.tabs.activeTab&&(t.category="good",t.numTrucks=t.numGoodTrucks)},!0),t.hideMenu=!0,t.selectCategory=function(e){switch(t.category=e,t.category){case"all":t.numTrucks=t.numAllTrucks,t.category="all",t.onCategoryChange({clickedCategory:"All Trucks"});break;case"critical":t.numTrucks=t.numCriticalTrucks,t.category="critical",t.onCategoryChange({clickedCategory:"Critical"});break;case"stable":t.numTrucks=t.numStableTrucks,t.category="stable",t.onCategoryChange({clickedCategory:"Stable"});break;case"good":t.numTrucks=t.numGoodTrucks,t.category="good",t.onCategoryChange({clickedCategory:"Good"})}},t.toggleDropDown=function(e){e.stopPropagation(),t.hideMenu=!t.hideMenu},t.closeDropDown=function(){t.hideMenu=!0}}}}]),angular.module("cyient.fixedsidebar",[]).directive("fixedSidebar",["$timeout","$window",function(t,e){return{scope:{fixedSidebar:"="},restrict:"A",link:function(a,r,i){function n(){if(r.hasClass("active")){var t=r.parent();r.css("left",t.position().left)}}a.$watch("fixedSidebar",function(e,a){t(function(){n()},1e3)}),angular.element(e).bind("resize",function(){n(),a.$digest()})}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(t,e){var a=null;this.open=function(e,n){a||(t.on("click",r),n.on("keydown",i)),a&&a!==e&&(a.isOpen=!1),a=e},this.close=function(e,n){a===e&&(a=null,t.off("click",r),n.off("keydown",i))};var r=function(t){if(a&&!(t&&"disabled"===a.getAutoClose()||t&&3===t.which)){var r=a.getToggleElement();if(!(t&&r&&r[0].contains(t.target))){var i=a.getDropdownElement();t&&"outsideClick"===a.getAutoClose()&&i&&i[0].contains(t.target)||(a.isOpen=!1,a.focusToggleElement(),e.$$phase||a.$apply())}}},i=function(t){27===t.which?(t.stopPropagation(),a.focusToggleElement(),r()):a.isKeynavEnabled()&&[38,40].indexOf(t.which)!==-1&&a.isOpen&&(t.preventDefault(),t.stopPropagation(),a.focusDropdownEntry(t.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(t,e,a,r,i,n,s,o,l,c,u){var d,p,h=this,f=t.$new(),g=i.appendToOpenClass,m=i.openClass,v=angular.noop,y=a.onToggle?r(a.onToggle):angular.noop,x=!1,b=null,k=!1,w=l.find("body");e.addClass("dropdown"),this.init=function(){if(a.isOpen&&(p=r(a.isOpen),v=p.assign,t.$watch(p,function(t){f.isOpen=!!t})),angular.isDefined(a.dropdownAppendTo)){var i=r(a.dropdownAppendTo)(f);i&&(b=angular.element(i))}x=angular.isDefined(a.dropdownAppendToBody),k=angular.isDefined(a.keyboardNav),x&&!b&&(b=w),b&&h.dropdownMenu&&(b.append(h.dropdownMenu),e.on("$destroy",function(){h.dropdownMenu.remove()}))},this.toggle=function(t){return f.isOpen=arguments.length?!!t:!f.isOpen,angular.isFunction(v)&&v(f,f.isOpen),f.isOpen},this.isOpen=function(){return f.isOpen},f.getToggleElement=function(){return h.toggleElement},f.getAutoClose=function(){return a.autoClose||"always"},f.getElement=function(){return e},f.isKeynavEnabled=function(){return k},f.focusDropdownEntry=function(t){var a=h.dropdownMenu?angular.element(h.dropdownMenu).find("a"):e.find("ul").eq(0).find("a");switch(t){case 40:angular.isNumber(h.selectedOption)?h.selectedOption=h.selectedOption===a.length-1?h.selectedOption:h.selectedOption+1:h.selectedOption=0;break;case 38:angular.isNumber(h.selectedOption)?h.selectedOption=0===h.selectedOption?0:h.selectedOption-1:h.selectedOption=a.length-1}a[h.selectedOption].focus()},f.getDropdownElement=function(){return h.dropdownMenu},f.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},f.$watch("isOpen",function(a,r){if(b&&h.dropdownMenu){var i,l,p,k=o.positionElements(e,h.dropdownMenu,"bottom-left",!0);if(i={top:k.top+"px",display:a?"block":"none"},l=h.dropdownMenu.hasClass("dropdown-menu-right"),l?(i.left="auto",p=o.scrollbarWidth(!0),i.right=window.innerWidth-p-(k.left+e.prop("offsetWidth"))+"px"):(i.left=k.left+"px",i.right="auto"),!x){var w=o.offset(b);i.top=k.top-w.top+"px",l?i.right=window.innerWidth-(k.left-w.left+e.prop("offsetWidth"))+"px":i.left=k.left-w.left+"px"}h.dropdownMenu.css(i)}var A=b?b:e,T=A.hasClass(b?g:m);if(T===!a&&s[a?"addClass":"removeClass"](A,b?g:m).then(function(){angular.isDefined(a)&&a!==r&&y(t,{open:!!a})}),a)h.dropdownMenuTemplateUrl&&u(h.dropdownMenuTemplateUrl).then(function(t){d=f.$new(),c(t.trim())(d,function(t){var e=t;h.dropdownMenu.replaceWith(e),h.dropdownMenu=e})}),f.focusToggleElement(),n.open(f,e);else{if(h.dropdownMenuTemplateUrl){d&&d.$destroy();var L=angular.element('<ul class="dropdown-menu"></ul>');h.dropdownMenu.replaceWith(L),h.dropdownMenu=L}n.close(f,e),h.selectedOption=null}angular.isFunction(v)&&v(t,a)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(t,e,a,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(t,e,a,r){if(r&&!angular.isDefined(a.dropdownNested)){e.addClass("dropdown-menu");var i=a.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=e)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,e,a,r){if(r){e.addClass("dropdown-toggle"),r.toggleElement=e;var i=function(i){i.preventDefault(),e.hasClass("disabled")||a.disabled||t.$apply(function(){r.toggle()})};e.bind("click",i),e.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(r.isOpen,function(t){e.attr("aria-expanded",!!t)}),t.$on("$destroy",function(){e.unbind("click",i)})}}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(t,e){var a,r,i={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},n={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},s=/(HTML|BODY)/;return{getRawNode:function(t){return t.nodeName?t:t[0]||t},parseStyle:function(t){return t=parseFloat(t),isFinite(t)?t:0},offsetParent:function(a){function r(t){return"static"===(e.getComputedStyle(t).position||"static")}a=this.getRawNode(a);for(var i=a.offsetParent||t[0].documentElement;i&&i!==t[0].documentElement&&r(i);)i=i.offsetParent;return i||t[0].documentElement},scrollbarWidth:function(i){if(i){if(angular.isUndefined(r)){var n=t.find("body");n.addClass("uib-position-body-scrollbar-measure"),r=e.innerWidth-n[0].clientWidth,r=isFinite(r)?r:0,n.removeClass("uib-position-body-scrollbar-measure")}return r}if(angular.isUndefined(a)){var s=angular.element('<div class="uib-position-scrollbar-measure"></div>');t.find("body").append(s),a=s[0].offsetWidth-s[0].clientWidth,a=isFinite(a)?a:0,s.remove()}return a},scrollbarPadding:function(t){t=this.getRawNode(t);var a=e.getComputedStyle(t),r=this.parseStyle(a.paddingRight),i=this.parseStyle(a.paddingBottom),n=this.scrollParent(t,!1,!0),o=this.scrollbarWidth(n,s.test(n.tagName));return{scrollbarWidth:o,widthOverflow:n.scrollWidth>n.clientWidth,right:r+o,originalRight:r,heightOverflow:n.scrollHeight>n.clientHeight,bottom:i+o,originalBottom:i}},isScrollable:function(t,a){t=this.getRawNode(t);var r=a?i.hidden:i.normal,n=e.getComputedStyle(t);return r.test(n.overflow+n.overflowY+n.overflowX)},scrollParent:function(a,r,n){a=this.getRawNode(a);var s=r?i.hidden:i.normal,o=t[0].documentElement,l=e.getComputedStyle(a);if(n&&s.test(l.overflow+l.overflowY+l.overflowX))return a;var c="absolute"===l.position,u=a.parentElement||o;if(u===o||"fixed"===l.position)return o;for(;u.parentElement&&u!==o;){var d=e.getComputedStyle(u);if(c&&"static"!==d.position&&(c=!1),!c&&s.test(d.overflow+d.overflowY+d.overflowX))break;u=u.parentElement}return u},position:function(a,r){a=this.getRawNode(a);var i=this.offset(a);if(r){var n=e.getComputedStyle(a);i.top-=this.parseStyle(n.marginTop),i.left-=this.parseStyle(n.marginLeft)}var s=this.offsetParent(a),o={top:0,left:0};return s!==t[0].documentElement&&(o=this.offset(s),o.top+=s.clientTop-s.scrollTop,o.left+=s.clientLeft-s.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:a.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:a.offsetHeight),top:Math.round(i.top-o.top),left:Math.round(i.left-o.left)}},offset:function(a){a=this.getRawNode(a);var r=a.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:a.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:a.offsetHeight),top:Math.round(r.top+(e.pageYOffset||t[0].documentElement.scrollTop)),left:Math.round(r.left+(e.pageXOffset||t[0].documentElement.scrollLeft))}},viewportOffset:function(a,r,i){a=this.getRawNode(a),i=i!==!1;var n=a.getBoundingClientRect(),s={top:0,left:0,bottom:0,right:0},o=r?t[0].documentElement:this.scrollParent(a),l=o.getBoundingClientRect();if(s.top=l.top+o.clientTop,s.left=l.left+o.clientLeft,o===t[0].documentElement&&(s.top+=e.pageYOffset,s.left+=e.pageXOffset),s.bottom=s.top+o.clientHeight,s.right=s.left+o.clientWidth,i){var c=e.getComputedStyle(o);s.top+=this.parseStyle(c.paddingTop),s.bottom-=this.parseStyle(c.paddingBottom),s.left+=this.parseStyle(c.paddingLeft),s.right-=this.parseStyle(c.paddingRight)}return{top:Math.round(n.top-s.top),bottom:Math.round(s.bottom-n.bottom),left:Math.round(n.left-s.left),right:Math.round(s.right-n.right)}},parsePlacement:function(t){var e=n.auto.test(t);return e&&(t=t.replace(n.auto,"")),t=t.split("-"),t[0]=t[0]||"top",n.primary.test(t[0])||(t[0]="top"),t[1]=t[1]||"center",n.secondary.test(t[1])||(t[1]="center"),e?t[2]=!0:t[2]=!1,t},positionElements:function(t,a,r,i){t=this.getRawNode(t),a=this.getRawNode(a);var s=angular.isDefined(a.offsetWidth)?a.offsetWidth:a.prop("offsetWidth"),o=angular.isDefined(a.offsetHeight)?a.offsetHeight:a.prop("offsetHeight");r=this.parsePlacement(r);var l=i?this.offset(t):this.position(t),c={top:0,left:0,placement:""};if(r[2]){var u=this.viewportOffset(t,i),d=e.getComputedStyle(a),p={width:s+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:o+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))};if(r[0]="top"===r[0]&&p.height>u.top&&p.height<=u.bottom?"bottom":"bottom"===r[0]&&p.height>u.bottom&&p.height<=u.top?"top":"left"===r[0]&&p.width>u.left&&p.width<=u.right?"right":"right"===r[0]&&p.width>u.right&&p.width<=u.left?"left":r[0],r[1]="top"===r[1]&&p.height-l.height>u.bottom&&p.height-l.height<=u.top?"bottom":"bottom"===r[1]&&p.height-l.height>u.top&&p.height-l.height<=u.bottom?"top":"left"===r[1]&&p.width-l.width>u.right&&p.width-l.width<=u.left?"right":"right"===r[1]&&p.width-l.width>u.left&&p.width-l.width<=u.right?"left":r[1],"center"===r[1])if(n.vertical.test(r[0])){var h=l.width/2-s/2;u.left+h<0&&p.width-l.width<=u.right?r[1]="left":u.right+h<0&&p.width-l.width<=u.left&&(r[1]="right")}else{var f=l.height/2-p.height/2;u.top+f<0&&p.height-l.height<=u.bottom?r[1]="top":u.bottom+f<0&&p.height-l.height<=u.top&&(r[1]="bottom")}}switch(r[0]){case"top":c.top=l.top-o;break;case"bottom":c.top=l.top+l.height;break;case"left":c.left=l.left-s;break;case"right":c.left=l.left+l.width}switch(r[1]){case"top":c.top=l.top;break;case"bottom":c.top=l.top+l.height-o;break;case"left":c.left=l.left;break;case"right":c.left=l.left+l.width-s;break;case"center":n.vertical.test(r[0])?c.left=l.left+l.width/2-s/2:c.top=l.top+l.height/2-o/2}return c.top=Math.round(c.top),c.left=Math.round(c.left),c.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],c},positionArrow:function(t,a){t=this.getRawNode(t);var r=t.querySelector(".tooltip-inner, .popover-inner");if(r){var i=angular.element(r).hasClass("tooltip-inner"),s=i?t.querySelector(".tooltip-arrow"):t.querySelector(".arrow");if(s){var o={top:"",bottom:"",left:"",right:""};if(a=this.parsePlacement(a),"center"===a[1])return void angular.element(s).css(o);var l="border-"+a[0]+"-width",c=e.getComputedStyle(s)[l],u="border-";u+=n.vertical.test(a[0])?a[0]+"-"+a[1]:a[1]+"-"+a[0],u+="-radius";var d=e.getComputedStyle(i?r:t)[u];switch(a[0]){case"top":o.bottom=i?"0":"-"+c;break;case"bottom":o.top=i?"0":"-"+c;break;case"left":o.right=i?"0":"-"+c;break;case"right":o.left=i?"0":"-"+c}o[a[1]]=d,angular.element(s).css(o)}}}}}]),angular.module("cyient.histogram",[]).directive("histogram",[function(){
return{scope:{data:"=",toolTipValue:"="},restrict:"AE",link:function(t,e,a){function r(){d3.select(i).text("");var a=e.width(),r=e.height(),n={top:10,right:10,bottom:24,left:55},s=a-n.left-n.right,o=r-n.top-n.bottom,l=d3.format(".0%"),c=d3.scale.ordinal().rangeRoundBands([0,s],.1),u=d3.scale.linear().range([o,0]),d=d3.svg.axis().scale(c).orient("bottom"),p=d3.svg.axis().scale(u).orient("left").ticks(5).tickFormat(l),h=d3.select(i).append("svg").attr("width",s+n.left+n.right).attr("height",o+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),f=t.data;c.domain(f.map(function(t){return t.xValue})),u.domain([0,d3.max(f,function(t){return t.yValue})]),h.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(d),h.append("g").attr("class","y axis").call(p),h.selectAll(".bar").data(f).enter().append("rect").attr("class","bar").attr("x",function(t){return c(t.xValue)}).attr("width",c.rangeBand()).attr("y",function(t,e){return o}).attr("height",0).transition().duration(2e3).delay(function(t,e){return 50*e}).attr("y",function(t){return u(t.yValue)}).attr("height",function(t){return o-u(t.yValue)})}var i=e[0];t.$watch("data",function(t,e){r()},!0)}}}]),function(){angular.module("directives/lifeChart/lifeChart.html",[]).run(["$templateCache",function(t){t.put("directives/lifeChart/lifeChart.html",'<div class="graph-container"><div id="life-chart-legends" class="chart-legends"><div class="rul-legends" ng-if="isRULLegend"><div class="checkbox-wrapper"><div class="checkbox-btn-group"><div class="life-1"><label class="checkbox-button today-check"><input type="checkbox" name="SMHValue" ng-model="isRULTodayLine" ng-click="toggleRULTodayLine()"><span>Today <span class="graph-value">{{xvalue}}</span></span></label></div><div class="life-1"><label class="checkbox-button health-check"><input type="checkbox" name="check" ng-model="isRULHealthLine" ng-click="toggleRULHealthLine()"><span>Health <span class="graph-value">{{(healthvalue | setDecimal: 3)}}</span></span></label></div><div class="life-1"><label class="checkbox-button rul-check"><input type="checkbox" name="check" ng-model="isRULArea" ng-click="toggleRULArea()"><span>RUL <span class="graph-value" ng-if="rulminvalue">min: {{(rulminvalue | setDecimal: 2)}}<span ng-if="rulmaxvalue">,</span></span> &nbsp; <span ng-if="rulmaxvalue"> max: {{(rulmaxvalue | setDecimal: 2) }}</span></span></label></div></div></div></div><div class="deterioration-legends" ng-if="isDeteriotationLegend"><div class="checkbox-wrapper"><div class="checkbox-btn-group"><label class="checkbox-button today-check"><input type="checkbox" name="SMHValue" ng-model="isRODTodayLine" ng-click="toggleRODTodayLine()"><span>Today <span class="graph-value">{{xvalue}}</span></span></label><label class="checkbox-button health-check"><input type="checkbox" name="check" ng-model="isROD" ng-click="toggleROD()"><span>ROD <span class="graph-value">{{(healthvalue | setDecimal: 3)}}</span></span></label><label class="checkbox-button optimal-check"><input type="checkbox" name="check" ng-model="isRODOptimalVal" ng-click="toggleOptimalVal()"><span>Optimal Value</span></label></div></div></div></div><div id="life-chart-graph"><svg class="life-graph-{{chartType}}"></svg></div></div>')}]),angular.module("cyient.lifechart",["directives/lifeChart/lifeChart.html"]).directive("lifeChart",["_","$compile","$timeout","$document","$state","$filter","$log",function(t,e,a,r,i,n,s){return{restrict:"E",scope:{width:"=",height:"=",todayX:"=",todayY:"=",data:"=data",xvalue:"@",trendvalue:"@",siteavgvalue:"@",healthvalue:"@",rulminvalue:"@",rulmaxvalue:"@",optimalmin:"@",optimalmax:"@",chartType:"@"},templateUrl:"directives/lifeChart/lifeChart.html",link:function(e,r,s,o){function l(t,e){return t.xAxis<e.xAxis?-1:t.xAxis>e.xAxis?1:0}var c={top:20,right:100,bottom:100,left:55},u=100,d=e.width,p=e.height,h=e.data.minOptimalValue||0,f=e.data.maxOptimalValue||0;e.inline="block","cyient.protected.sitedetails.whatifscenario"===i.current.name&&(e.inline="inline-flex");var g=!1;"RUL"===e.chartType?(e.isRULLegend=!0,e.isRULTodayLine=!0,e.isRULHealthLine=!0,e.isRULTrendLine=!1,e.isRULSiteAvgLine=!1,e.isRULArea=!0,g=!1,e.toggleRULTodayLine=function(){e.isRULTodayLine=!e.isRULTodayLine,e.isRULTodayLine?d3.select(r[0]).selectAll("#life-chart-todayLine, #life-chart-todayLabel, #life-chart-intersect").style("visibility","visible"):d3.select(r[0]).selectAll("#life-chart-todayLine, #life-chart-todayLabel, #life-chart-intersect").style("visibility","hidden")},e.toggleRULTrendLine=function(){e.isRULTrendLine=!e.isRULTrendLine,e.isRULTrendLine?d3.select(r[0]).select(".trendLine").style("visibility","visible"):d3.select(r[0]).select(".trendLine").style("visibility","hidden")},e.toggleRULHealthLine=function(){e.isRULHealthLine=!e.isRULHealthLine,e.isRULHealthLine?d3.select(r[0]).select(".healthLine").style("visibility","visible"):d3.select(r[0]).select(".healthLine").style("visibility","hidden")},e.toggleRULSiteAvgLine=function(){e.isRULSiteAvgLine=!e.isRULSiteAvgLine,e.isRULSiteAvgLine?d3.select(r[0]).select(".siteAvgLine").style("visibility","visible"):d3.select(r[0]).select(".siteAvgLine").style("visibility","hidden")},e.toggleRULArea=function(){e.isRULArea=!e.isRULArea,e.isRULArea?d3.select(r[0]).selectAll("#rul-minArea, #rul-maxArea, #rulMaxLine, #rulAvgLine, #rulMinLine, #life-chart-minLine, #life-chart-minLabel,  #life-chart-avgLine, #life-chart-avgLabel, #life-chart-maxLine, #life-chart-maxLabel").style("visibility","visible"):d3.select(r[0]).selectAll("#rul-minArea, #rul-maxArea, #rulMaxLine, #rulAvgLine, #rulMinLine, #life-chart-minLine, #life-chart-minLabel,  #life-chart-avgLine, #life-chart-avgLabel, #life-chart-maxLine, #life-chart-maxLabel").style("visibility","hidden")}):"ROD"===e.chartType&&(e.isDeteriotationLegend=!0,e.isRODTodayLine=!0,e.isRODTrendLine=!0,e.isROD=!0,e.isRODOptimalVal=!0,e.isRODSiteAvgLine=!1,g=!0,e.toggleRODTodayLine=function(){e.isRODTodayLine=!e.isRODTodayLine,e.isRODTodayLine?d3.select(r[0]).selectAll("#life-chart-todayLine, #life-chart-todayLabel, #life-chart-intersect").style("visibility","visible"):d3.select(r[0]).selectAll("#life-chart-todayLine, #life-chart-todayLabel, #life-chart-intersect").style("visibility","hidden")},e.toggleRODTrendLine=function(){e.isRODTrendLine=!e.isRODTrendLine,e.isRODTrendLine?d3.select(r[0]).select(".trendLine").style("visibility","visible"):d3.select(r[0]).select(".trendLine").style("visibility","hidden")},e.toggleROD=function(){e.isROD=!e.isROD,e.isROD?d3.select(r[0]).select(".healthLine").style("visibility","visible"):d3.select(r[0]).select(".healthLine").style("visibility","hidden")},e.toggleOptimalVal=function(){e.isRODOptimalVal=!e.isRODOptimalVal,e.isRODOptimalVal?d3.select(r[0]).select(".optimalArea").style("visibility","visible"):d3.select(r[0]).select(".optimalArea").style("visibility","hidden")},e.toggleRODSiteAvgLine=function(){e.isRODSiteAvgLine=!e.isRODSiteAvgLine,e.isRODSiteAvgLine?d3.select(r[0]).select(".siteAvgLine").style("visibility","visible"):d3.select(r[0]).select(".siteAvgLine").style("visibility","hidden")}),e.render=function(){function a(){J.style("opacity",1),"RUL"===e.chartType&&e.isRULHealthLine?X.style("opacity",1):"ROD"===e.chartType&&e.isROD&&X.style("opacity",1),"RUL"===e.chartType&&e.isRULArea&&(K.style("opacity",1),Q.style("opacity",1),Z.style("opacity",1))}function i(){J.style("opacity",1e-6),X.style("opacity",1e-6),K.style("opacity",1e-6),Q.style("opacity",1e-6),Z.style("opacity",1e-6),e.xvalue=null,e.healthvalue=null,e.rulminvalue=null,e.rulmaxvalue=null}if(e.data){var s=(e.today,e.todayX),o=e.todayY,g=e.data.trendGraph||[],m=g.concat(e.data.healthGraph);m=t.sortBy(m,"yAxis"),m.sort(l);for(var v=m.filter(function(t){return t.xAxis===s||t.yAxis===o}),y=m.length-1;y>=0;y--)m[y].xAxis<v.xAxis&&m[y].yAxis<0&&m.splice(y,1);var x=Number.POSITIVE_INFINITY;for(var y in m)m[y].yAxis<x&&(x=m[y].yAxis);for(var b=(d3.max(m,function(t){return t.yAxis}),[]),k=[],w=[],A=[],T=null,y=0,L=m.length;y<L;y++)if(m[y].xAxis===s||m[y].yAxis===o){T=m.indexOf(m[y]);break}b=m.slice(0,T+1);var S=m.slice(T,m.length-1);k=t.map(S,function(t){return t.yAxisMin>1||t.yAxisMax>1,t}),"ROD"===e.chartType,t.omit(m,["yAxisMin","yAxisMax"]),t.omit(k,["yAxisMin","yAxisMax"]);for(var y in k)w.push({xAxis:k[y].xAxis,yAxis:k[y].yAxisMin}),A.push({xAxis:k[y].xAxis,yAxis:k[y].yAxisMax});k=t.sortBy(k,"yAxis"),k=t.remove(k,function(t){return t.xAxis<0||t.yAxis>0}),k.sort(l),w=t.sortBy(w,"yAxis"),w=t.remove(w,function(t){return t.xAxis<0||t.yAxis>0}),w.sort(l),A=t.sortBy(A,"yAxis"),A=t.remove(A,function(t){return t.xAxis<0||t.yAxis>0}),A.sort(l);var D=d3.scale.linear().domain([0,d3.max([].concat(m.map(function(t){return t.xAxis}),w.map(function(t){return t.xAxis}),A.map(function(t){return t.xAxis})))]).range([0,d-c.right]),O=d3.max([].concat(m.map(function(t){return t.yAxis}),w.map(function(t){return t.yAxis}),A.map(function(t){return t.yAxis}),[f])),R=d3.scale.linear().domain([0,O]).range([p/2,0]),C=(d3.max([].concat(m.length,w.length,A.length)),d3.select(r.children()[0]).select("svg").attr("width",d).attr("height",p).append("g").attr("id","life-graph-group").attr("transform","translate("+c.left+","+c.top+")")),$=C.append("g").attr("id","chart-body"),P=d3.svg.axis().scale(D).orient("bottom").ticks(6).tickSize(0).tickPadding(8);d3.selectAll(".xAxis>.tick>text").style("font-size",8);var M=d3.svg.axis().scale(R).orient("left").tickFormat(function(t){return t}).tickSize(5).ticks(5).tickPadding(6),N=d3.svg.line().interpolate("linear").x(function(t){return D(t.xAxis)}).y(function(t){return R(t.yAxis)}),_=(d3.svg.area().interpolate("monotone").x(function(t){return D(t.xAxis)}).y0(p).y1(function(t){return R(t.yAxis)}),p/2);$.append("g").attr("id","life-chart-xAxis").attr("class","x lifeChartAxis").attr("transform","translate(0,"+_+")").call(P),$.append("g").attr("id","life-chart-yAxis").attr("class","y lifeChartAxis").call(M),$.selectAll("line.horizontalGrid").data(R.ticks(5)).enter().append("line").attr({"class":"horizontalGrid",x1:0,x2:d,y1:function(t){return R(t)},y2:function(t){return R(t)},fill:"none","shape-rendering":"crispEdges",stroke:"#cbcccd","stroke-width":"1px"});d3.max(m,function(t){return t.xAxis});e.optimalmin=n("setDecimal")(h,3),e.optimalmax=n("setDecimal")(f,3),h&&f&&$.append("rect").attr("class","optimalArea").attr("x",0).attr("y",R(h)).attr("width",d).attr("height",Math.abs(R(f)-R(h))).style("visibility","RUL"===e.chartType?"hidden":e.isRODOptimalVal?"visible":"hidden");var I=$.append("path").datum(b).attr("class",function(t){return"lifeChartLine healthLine"}).attr("d",N),E=I.node().getTotalLength();if(I.attr("stroke-dasharray",E+" "+E).attr("stroke-dashoffset",E).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0).attr("visibility","RUL"===e.chartType?e.isRULHealthLine?"visible":"hidden":e.isROD?"visible":"hidden"),"ROD"===e.chartType){var U=t.minBy(b,"yAxis"),G=t.maxBy(b,"yAxis");$.append("circle").attr("cx",D(U.xAxis)).attr("cy",R(U.yAxis)).attr("r",4).attr("stroke","#65318f").attr("stroke-width","3px").attr("fill","#fff"),$.append("circle").attr("cx",D(G.xAxis)).attr("cy",R(G.yAxis)).attr("r",4).attr("stroke","#65318f").attr("stroke-width","3px").attr("fill","#fff")}if(1==e.data.showMoreLines&&e.data.dataPoints){var w=e.data.dataPoints.minLine,A=e.data.dataPoints.maxLine,k=e.data.dataPoints.avgLine;if(w&&w.length)for(var L=w.length,y=0;y<L;y++)w[y].xAxis=parseFloat(w[y].xAxis).toFixed(2);if(A&&A.length)for(var L=A.length,y=0;y<L;y++)A[y].xAxis=parseFloat(A[y].xAxis).toFixed(2);if(k&&k.length)for(var L=k.length,y=0;y<L;y++)k[y].xAxis=parseFloat(k[y].xAxis).toFixed(2)}if(k.length>0){var V=d3.svg.line().interpolate("linear").x(function(t){if(t)return D(t.xAxis)}).y(function(t){if(t)return R(t.yAxis)}),j=$.append("g").attr("id","rul-area").attr("class","rulArea");k=t.map(k,function(e){return t.omit(e,"yAxisMin")}),k=t.map(k,function(e){return t.omit(e,"yAxisMax")});var B=[t.head(k),t.last(k)],H=[t.head(k)];for(var y in w)B.push(w[y]);B.sort(l),B=t.uniqBy(B,"xAxis");for(var y in A)H.push(A[y]);H.sort(l),H=t.uniqBy(H,"xAxis"),H.push(t.last(k)),j.append("path").datum(B).attr("id","rul-minArea").attr("fill","#32d1dc").transition().delay(1e3).duration(2e3).ease("linear").attr("d",V).attr("visibility",e.isRULArea?"visible":"hidden"),j.append("path").datum(H).attr("id","rul-maxArea").attr("fill","#32d1dc").transition().delay(1e3).duration(2e3).ease("linear").attr("d",V).attr("visibility",e.isRULArea?"visible":"hidden");var F=j.append("path").datum(k).attr("id","rulAvgLine").attr({fill:"none",stroke:"#479fa5","stroke-width":"2px"}).attr("d",V),E=F.node().getTotalLength();F.attr("stroke-dasharray",E+" "+E).attr("stroke-dashoffset",E).transition().delay(1e3).duration(1e3).ease("linear").attr("stroke-dashoffset",0).attr("visibility",e.isRULArea?"visible":"hidden");var z=j.append("path").datum(A).attr("id","rulMaxLine").attr({fill:"none",stroke:"#479fa5","stroke-width":"1px"}).attr("d",V),E=z.node().getTotalLength();z.attr("stroke-dasharray",E+" "+E).attr("stroke-dashoffset",E).transition().delay(1e3).duration(2e3).ease("linear").attr("stroke-dashoffset",0).attr("visibility",e.isRULArea?"visible":"hidden");var W=j.append("path").datum(w).attr("id","rulMinLine").attr({fill:"none",stroke:"#479fa5","stroke-width":"1px"}).attr("d",V),E=W.node().getTotalLength();W.attr("stroke-dasharray",E+" "+E).attr("stroke-dashoffset",E).transition().delay(1e3).duration(2e3).ease("linear").attr("stroke-dashoffset",0).attr("visibility",e.isRULArea?"visible":"hidden")}var Y=[{xAxis:s,yAxis:0},{xAxis:s,yAxis:100}],q=$.append("g").attr("id","today-group");q.append("path").datum(Y).attr("id","life-chart-todayLine").attr("class","todayLine").attr("d",N),q.append("text").attr("id","life-chart-todayLabel").attr("class","lifeChartAxis").attr("transform","translate("+D(s)+",0)").attr("dx","5px").attr("dy","10px").text("Today"),q.selectAll("dot").data(v).enter().append("circle").attr("id","life-chart-intersect").attr("class","dots").attr("r","4").attr("cx",function(t){return D(t.xAxis)}).attr("cy",function(t){return R(t.yAxis)}),q.attr("visibility","RUL"===e.chartType?e.isRULTodayLine?"visible":"hidden":e.isRODTodayLine?"visible":"hidden"),$.append("rect").attr("id","chart-rect-"+e.chartType).attr("fill","#3ed1db").style("opacity",1e-6).attr("width",d).attr("height",p/2).on({mouseover:function(t){a(),e.$apply()},mouseout:function(t){i(),e.$apply()}}).on("mousemove",function(a){var r=d3.mouse(this)[0],i=(d3.mouse(this)[1],Number(parseFloat(D.invert(r)).toFixed(2)));if("ROD"===e.chartType)var i=100*Math.ceil(D.invert(r)/100);if("RUL"===e.chartType&&e.isRULHealthLine)var n=t.find(g,function(t){return t.xAxis==i});if("RUL"===e.chartType&&e.isRULArea)var l=t.find(k,function(t){return t.xAxis==i});if("RUL"===e.chartType&&e.isRULArea)var c=t.find(w,function(t){return t.xAxis==i});if("RUL"===e.chartType&&e.isRULArea)var u=t.find(A,function(t){return t.xAxis==i});if("ROD"===e.chartType&&e.isROD)var n=t.find(m,function(t){return t.xAxis==i});n&&(J.attr("x1",D(n.xAxis)).attr("x2",D(n.xAxis)),X.style("opacity",1).attr("cx",D(n.xAxis)).attr("cy",R(n.yAxis)),e.xvalue=n.xAxis,e.healthvalue=n.yAxis),"ROD"===e.chartType&&e.isROD&&(n||(J.attr("x1",D(s)).attr("x2",D(s)),X.style("opacity",1).attr("cx",D(s)).attr("cy",R(o)))),l&&(J.attr("x1",D(l.xAxis)).attr("x2",D(l.xAxis)),K.datum(l).style("opacity",1).attr("cx",function(t){return D(t.xAxis)}).attr("cy",function(t){return R(t.yAxis)}),e.xvalue=l.xAxis,e.trendvalue=l.yAxis),c&&(J.attr("x1",D(c.xAxis)).attr("x2",D(c.xAxis)),Q.datum(c).style("opacity",1).attr("cx",function(t){return D(t.xAxis)}).attr("cy",function(t){return R(t.yAxis)}),e.rulminvalue=c.yAxis),u&&(J.attr("x1",D(u.xAxis)).attr("x2",D(u.xAxis)),Z.datum(u).style("opacity",1).attr("cx",function(t){return D(t.xAxis)}).attr("cy",function(t){return R(t.yAxis)}),e.rulmaxvalue=u.yAxis),e.$apply()});var J=$.append("line").attr("id","hover-line").attr({x1:10,y1:0,x2:10,y2:p/2}).attr("class","hoverLine").style("opacity",1e-6),X=$.append("circle").attr("cx",0).attr("cy",0).attr("r",6).attr("fill","#65318f").style("opacity",1e-6),K=$.append("circle").attr("cx",0).attr("cy",0).attr("r",3).attr("fill","#479fa5").style("opacity",1e-6),Q=$.append("circle").attr("cx",0).attr("cy",0).attr("r",3).attr("fill","#479fa5").style("opacity",1e-6),Z=$.append("circle").attr("cx",0).attr("cy",0).attr("r",3).attr("fill","#479fa5").style("opacity",1e-6);if(e.isRULArea){var tt=t.last(w),et=t.last(k),at=t.last(A),rt=[tt,{xAxis:parseFloat(tt.xAxis).toFixed(2),yAxis:-25}],it=[et,{xAxis:parseFloat(et.xAxis).toFixed(2),yAxis:-55}],nt=[at,{xAxis:parseFloat(at.xAxis).toFixed(2),yAxis:-65}];if(tt.yAxis>0||e.data.showMoreLines){var st=$.append("path").datum(rt).attr("id","life-chart-minLine").attr("class","rulLabelLine").attr("d",N),ot=st.node().getTotalLength(),lt=D(tt.xAxis)-30;st.attr("stroke-dasharray",ot+" "+ot).attr("stroke-dashoffset",ot).transition().delay(2e3).duration(2e3).ease("linear").attr("stroke-dashoffset",0),$.append("text").attr("id","life-chart-minLabel").attr("class","rulLineLabel").attr("text-anchor","middle").attr("transform","translate("+lt+","+R(-25)+")").attr("fill-opacity",0).transition().delay(2e3).duration(2e3).ease("linear").attr("fill-opacity",1).text(tt.xAxis+" (min)")}if(et.yAxis>0||e.data.showMoreLines){var ct=$.append("path").datum(it).attr("id","life-chart-avgLine").attr("class","rulLabelLine").attr("d",N),ut=ct.node().getTotalLength(),dt=D(et.xAxis)-30;ct.attr("stroke-dasharray",ut+" "+ut).attr("stroke-dashoffset",ut).transition().delay(2e3).duration(2e3).ease("linear").attr("stroke-dashoffset",0),$.append("text").attr("id","life-chart-avgLabel").attr("class","rulLineLabel").attr("text-anchor","middle").attr("transform","translate("+dt+","+R(-55)+")").attr("fill-opacity",0).transition().delay(2e3).duration(2e3).ease("linear").attr("fill-opacity",1).text(et.xAxis+" (avg)")}if(at.yAxis>0||e.data.showMoreLines){var pt=$.append("path").datum(nt).attr("id","life-chart-maxLine").attr("class","rulLabelLine").attr("d",N),ht=pt.node().getTotalLength(),ft=D(at.xAxis)-30;pt.attr("stroke-dasharray",ht+" "+ht).attr("stroke-dashoffset",ht).transition().delay(2e3).duration(2e3).ease("linear").attr("stroke-dashoffset",0),$.append("text").attr("id","life-chart-maxLabel").attr("class","rulLineLabel").attr("text-anchor","middle").attr("transform","translate("+ft+","+R(-65)+")").attr("fill-opacity",0).transition().delay(2e3).duration(2e3).ease("linear").attr("fill-opacity",1).text(at.xAxis+" (max)")}}"ROD"==e.chartType?$.append("text").attr("id","life-chart-yLabel").attr("class","lifeChartLabels").attr("text-anchor","middle").attr("transform","translate(-45,"+(p/2-150)+") rotate(-90)").text(e.data.yLabel+" (%)"):$.append("text").attr("id","life-chart-yLabel").attr("class","lifeChartLabels").attr("text-anchor","middle").attr("transform","translate(-45,"+(p/2-50)+") rotate(-90)").text(e.data.yLabel+" (%)"),$.append("text").attr("id","life-chart-xLabel").attr("class","lifeChartLabels").attr("text-anchor","middle").attr("transform","translate(50,"+(p+u)/2+")").text(e.data.xLabel)}},e.$watch("data",function(t){t&&a(function(){e.render()},300)},!0)}}}])}(),angular.module("cyient.lineDashedLine",[]).directive("lineDashedLine",[function(){return{scope:{data:"="},restrict:"AE",templateUrl:"directives/lineDashedLine/linedashedline.html",link:function(t,e,a){function r(){var a=t.data;d3.select(i).select("svg").text("");var r=e.width(),o=e.height(),l=(d3.time.format("%Y%m%d").parse,{top:10,right:10,bottom:150,left:55}),c=r-l.left-l.right,u=o-l.top-l.bottom,d=d3.time.scale().range([0,c]),p=d3.scale.linear().range([u,0]),h=d3.scale.category10(),f=d3.svg.axis().scale(d).orient("bottom").tickFormat(d3.time.format("%d %b")),g=d3.svg.axis().scale(p).orient("left"),m=d3.svg.line().interpolate("basis").x(function(t){return d(t[n])}).y(function(t){return p(t[s])}),v=d3.select(i).select("svg").attr("width",c+l.left+l.right).attr("height",u+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")");h.domain(d3.keys(a[0]).filter(function(t){return"date"!==t})),d.domain([d3.min(a,function(t){return d3.min(t.values,function(t){return t[n]})}),d3.max(a,function(t){return d3.max(t.values,function(t){return t[n]})})]),p.domain([0,d3.max(a,function(t){return d3.max(t.values,function(t){return t[s]})})]),v.append("g").attr("class","x axis").attr("transform","translate(0,"+u+")").call(f),v.append("g").attr("class","y axis").call(g);var y=v.selectAll(".failure").data(a).enter().append("g").attr("class","failure");y.append("path").attr("class","line").style("stroke-dasharray",function(t,e){return e%2===0?"1, 0":"2, 5"}).attr("d",function(t){return m(t.values)}).style("fill","none").style("stroke",function(t){return h(t.name)});var x=v.append("g").attr("class","focus").style("display","none");x.append("circle").attr("r",4.5),x.append("text").attr("x",9).attr("dy",".35em")}var i=e[0];t.$watch("data",function(t,e){r()},!0);var n="xValue",s="yValue"}}}]),function(){angular.module("cyient.loader",[]).directive("loading",["$http",function(t){return{restrict:"A",templateUrl:"directives/loader/loader.html",link:function(e,a,r){e.isLoading=function(){return t.pendingRequests.length>0},e.$watch(e.isLoading,function(t){t?a.show():a.hide()})}}}])}(),function(){angular.module("directives/miniLifeChart/miniLifeChart.html",[]).run(["$templateCache",function(t){t.put("directives/miniLifeChart/miniLifeChart.html",'<div><div id="mini-lifechart-graph"><svg class="mini-life-canvas"></svg></div></div>')}]),angular.module("cyient.miniLifechart",["directives/miniLifeChart/miniLifeChart.html"]).directive("miniLifechart",["$q","$timeout","$log",function(t,e,a){return{restrict:"E",replace:!0,scope:{width:"=",height:"=",todayX:"=",todayY:"=",smh:"=",rul:"=",data:"=data",dotRadius:"="},templateUrl:"directives/miniLifeChart/miniLifeChart.html",link:function(t,e,a){var r={top:10,right:15,bottom:30,left:10},i=d3.select(e.children()[0]).select("svg").attr("width","100%").attr("height",t.height+r.bottom).append("g").attr("id","mini-lifechart-group").attr("transform","translate("+r.left+","+r.top+")");window.onresize=function(){return t.$apply()},t.$watch(function(){return angular.element(window)[0].innerWidth},function(){var e=angular.element(window)[0].innerWidth;return e>=1024&&e<1200&&(t.width=95),e>=1200&&(t.width=125),t.render(t.data,t.todayX,t.todayY)}),t.render=function(e,a,r){if(e){for(var n={originPos:0,xTodayPos:null,yTodayPos:null,rulPos:null},s=e.length-1;s>=0;s--)e[s].yAxis<0&&e.splice(s,1);var o=Number.POSITIVE_INFINITY;for(var s in e)e[s].yAxis<o&&(o=e[s].yAxis);var l=Math.max.apply(Math,e.map(function(t){return t.xAxis}));n.rulPos=l;e[Math.round((e.length-1)/2)];n.xTodayPos=a;for(var c in e)e[c].label="",e[c].xAxis===a&&(e[c].label="Today",n.yTodayPos=e[c].yAxis);var u=t.width,d=t.height,p=d3.scale.linear().domain([0,d3.max(e,function(t){return t.xAxis})]).range([0,u]),h=d3.scale.linear().domain([0,d3.max(e,function(t){return t.yAxis})]).range([d,0]),f=d3.svg.axis().scale(p).orient("bottom").ticks(0).tickSize(0).tickPadding(12),g=d3.svg.axis().scale(h).orient("left").ticks(0).tickSize(0).tickPadding(12);i.selectAll("*").remove();for(var m=i.append("g"),v=d3.svg.line().interpolate("monotone").x(function(t){return p(t.xAxis)}).y(function(t){return h(t.yAxis)}),y=function(t,e){return d3.svg.area().interpolate("monotone").x(function(t){return p(t.xAxis)}).y0(d).y1(function(t){return h(t[e]||0)})(t)},x=function(t,e){return d3.svg.area().interpolate("linear").x(function(t){return p(t.xAxis)}).y0(d).y1(function(t){return h(t[e]||0)})(t)},b=[],k=null,w=null,s=0,A=e.length;s<A;s++)"Today"===e[s].label&&(k=e.indexOf(e[s]),w=e[k].xAxis);b=e.slice(0,k+1);var T=(e[e.length-1].xAxis,e.filter(function(t){return"Today"===t.label||t.xAxis===l}));i.append("g").attr("class","x mlifeChartAxis").attr("transform","translate(0,"+d+")").call(f),i.append("g").attr("class","y mlifeChartAxis").call(g),m.append("path").attr("class","mArea1").attr("d",y(b)).attr("opacity",1).transition().duration(1e3).attr("d",y(b,"yAxis")),m.append("path").attr("class","mArea2").attr("d",x(T)).attr("opacity",1).transition().duration(2e3).attr("d",x(T,"yAxis"));var L=(m.append("path").datum(b).attr("class","mlifeChartLine").transition().duration(3e3).attr("d",v),m.append("path").datum(T).attr("class","mlifeChartLine").style("stroke-dasharray","3, 3").transition().duration(3e3).attr("d",v),[{xAxis:n.xTodayPos,yAxis:0},{xAxis:n.xTodayPos,yAxis:n.yTodayPos}]),S=m.append("path").datum(L).attr("class","midpointLine").attr("d",v),D=S.node().getTotalLength();S.attr("stroke-dasharray",D+" "+D).attr("stroke-dashoffset",D).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),m.append("text").attr("id","main-label").attr("x",0).attr("y",d+5).attr("dy",".85em").attr("class","mlifeChartLabels").text(Math.round(t.smh)),m.append("text").attr("id","secondary-label").attr("x",u-25).attr("y",d+5).attr("dy",".85em").attr("class","mlifeChartLabels").text(Math.round(t.rul))}},t.$watch("data",function(e){e&&t.render(t.data,t.todayX,t.todayY)},!0)}}}])}(),angular.module("cyient.onfinishrender",[]).directive("onFinishRender",["$timeout",function(t){return{restrict:"AE",link:function(e,a,r){e.$last===!0&&t(function(){e.$emit(r.onFinishRender)})}}}]),angular.module("cyient.popup",[]).directive("popup",[function(){return{restrict:"AE",transclude:!0,scope:{onClose:"&"},templateUrl:"directives/popup/popup.html",link:function(t,e){}}}]),angular.module("cyient.progressarc",[]).directive("progressArc",[function(){return{scope:{progress:"=",type:"@",label:"@",radius:"=",radiusDiff:"=",avg:"=",hidePointer:"="},restrict:"AE",link:function(t,e,a){function r(){var a=e[0],r=t.radius||85,i=r-(t.radiusDiff||8),n=2*r+5,s=r+30,o=(1*Math.PI,t.label||"Health"),l="type1"===t.type?"#ffdd33":"#f7941e",c="#e1e1de",u="type1"===t.type?"#fff":"#000",d=d3.scale.linear().domain([0,100]).range([-Math.PI/2,Math.PI/2]).clamp(!0),p=d3.scale.linear().domain([0,100]).range([-180,180]).clamp(!0),h=d(0),f=d(t.progress),g=d(t.avg-1),m=d(t.avg+1),v=d3.svg.arc().innerRadius(i).outerRadius(r).startAngle(h).endAngle(Math.PI/2),y=d3.svg.arc().innerRadius(i).outerRadius(r).startAngle(h),x=d3.svg.arc().innerRadius(i).outerRadius(r).startAngle(g).endAngle(m),b=d3.select(a).append("svg").attr("width",n).attr("height",s).attr("class","progress-arc").append("g").attr("transform","translate(0, 10)"),k=b.append("g").attr("class","season-progress").attr("transform","translate("+r+","+r+")"),w=(k.append("path").datum({endAngle:Math.PI/2}).style("fill",c).attr("d",v),k.append("path").datum({endAngle:h}).style("fill",l).attr("class","foreground").attr("d",y));w.transition().duration(2e3).delay(750).ease("linear").attrTween("d",function(t){var e=d3.interpolate(t.endAngle,f);return function(a){return t.endAngle=e(a),y(t)}});var A=(k.append("path").datum({endAngle:f}).style("fill","#fff").style("opacity",0).attr("d",x),"type1"===t.type?23:12),T="type1"===t.type?20:8,L=k.append("g").attr("transform",function(t){return"translate("+x.centroid(t)+")"}).append("svg:image").attr("xlink:href","svg/pointer.svg").attr("x",-4).attr("y",-T).attr("width",8).attr("height",A).attr("transform","rotate("+p(t.avg)/2+")"),S=d3.tip().attr("class","d3-tip").offset([-10,0]).html("Site Avg: "+Math.round(t.avg));b.call(S),L.on("mouseover",S.show).on("mouseout",S.hide),t.hidePointer&&L.attr("display","none");var D=(k.append("text").attr("text-anchor","middle").attr("dy","-.35em").attr("font-size","35").style("fill",u).attr("class","progress-percent").text(Math.round(t.progress)+"%"),b.append("g").attr("transform","translate(0,"+(r+15)+")").attr("width",r).attr("font-size","17").attr("y","5"));D.append("text").attr("text-anchor","left").attr("x","0").attr("class","startpoint").text("0"),D.append("text").attr("text-anchor","end").attr("x",2*r+5).attr("class","endpoint").text("100"),D.append("text").attr("text-anchor","middle").attr("x",r).attr("class","progress-health").text(o);e.on("$destroy",function(){S.destroy()})}t.$watch("progress",function(t){t&&(d3.select(e[0]).selectAll("svg.progress-arc").remove(),r())})}}}]).directive("smProgressArc",[function(){return{scope:{progress:"="},restrict:"AE",link:function(t,e,a){var r=e[0],i=28,n=i/2,s=.7*n,o=d3.scale.linear().domain([0,100]).range([-Math.PI/2,Math.PI/2]).clamp(!0),l=d3.select(r).append("svg").attr("width",i).attr("height",i/2).append("g").attr("transform","translate("+i/2+","+i/2+")"),c=d3.svg.arc().innerRadius(n).outerRadius(s).startAngle(o(0)).endAngle(o(100));l.append("path").attr("class","arc").attr("d",c).attr("fill","#c4c7ce"),c.endAngle(o(t.progress)),l.append("path").attr("d",c).attr("fill","#f7941e")}}}]),function(){function t(t,e,a,r){function i(){return angular.isDefined(t.maxParam)?t.maxParam:a.max}var n=this,s=angular.isDefined(e.animate)?t.$parent.$eval(e.animate):a.animate;this.bars=[],t.max=i(),this.addBar=function(t,e,a){s||e.css({transition:"none"}),this.bars.push(t),t.max=i(),t.title=a&&angular.isDefined(a.title)?a.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=n.bars.reduce(function(t,e){return e.percent=+(100*e.value/e.max).toFixed(2),t+e.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,n.removeBar(t)})},this.removeBar=function(t){this.bars.splice(this.bars.indexOf(t),1),this.bars.forEach(function(t){t.recalculatePercentage()})},t.$watch("maxParam",function(t){n.bars.forEach(function(t){t.max=i(),t.recalculatePercentage()})})}angular.module("cyient.progressbar",["progressbar.template"]).constant("progressConfig",{animate:!0,max:100}).controller("progressController",t).filter("firstLetterCapital",function(){return function(t){return t?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():""}}).directive("progressBar",["$timeout",function(t){return{restrict:"E",replace:!0,transclude:!0,controller:"progressController",scope:{value:"=",maxParam:"=?max",type:"@",textval:"@",trucks:"="},templateUrl:"directives/progressBar/progress-bar.html",link:function(e,a,r,i){t(function(){i.addBar(e,angular.element(a.children()[0]),{title:r.title})},200)}}}]),t.$inject=["$scope","$attrs","progressConfig","$timeout"]}(),angular.module("progressbar.template",[]).run(["$templateCache",function(t){t.put("directives/progressBar/progress-bar.html",'<div><div class="progress-bar-title">\n<span class=\'das-trucks-count\' ng-class="type && \'progress-bar-title-\' + type">{{trucks}}</span><span class=\'das-trucks-type\' ng-class="type && \'progress-bar-title-\' + type">{{textval | firstLetterCapital}}</span>\n</div>\n<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 0) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n</div>\n')}]),angular.module("cyient.scrollonclick",[]).directive("scrollOnClick",[function(){return{restrict:"A",link:function(t,e){e.on("click",function(){$("html,body").animate({scrollTop:0},1e3)})}}}]),angular.module("cyient.scrolltowhen",[]).directive("scrollToWhen",["$timeout",function(t){return{restrict:"AE",scope:{scrollToWhen:"=",scrollToDelay:"="},link:function(e,a){e.$watch("scrollToWhen",function(r,i){r===!0&&t(function(){$("html, body").animate({scrollTop:a.offset().top-135},1e3)},e.scrollToDelay||0)})}}}]),angular.module("cyient.slider",[]).directive("slider",["$window",function(t){return{restrict:"E",scope:{data:"=",ticksNumber:"=",disabled:"=",onSlide:"&"},link:function(e,a,r){function i(){function t(){var t=y.extent()[0];if(!d3.event.sourceEvent)return void k.attr("cx",h(t));if(t=h.invert(d3.mouse(this)[0]),y.extent([t,t]),e.disabled)return void k.attr("cx",h(e.data.current));var a,r=!1,i=t-e.data.current;Math.abs(i)<l?a=e.data.current:i<0?(a=e.data.current-l,
r=!0):i>0?(a=e.data.current+l,r=!0):a=e.data.current,a=_.clamp(a,s,o),k.attr("cx",h(a)),e.data.current=Math.round(a),w.html(Math.round(e.data.current)+e.data.units),A&&(A=!1),r&&e.$apply()}if(e.data){d3.select(n).text("");var r=e.data.min,i=e.data.max,s=e.data.start,o=e.data.end,l=(e.data.current,e.data.optimal,e.data.units,(e.data.max-e.data.min)/10),c={top:0,right:20,bottom:0,left:10},u=a.width()-c.left-c.right,d=70-c.bottom-c.top,p=d3.scale.linear().domain([r,i]).range([0,u]).clamp(!0),h=d3.scale.linear().domain([s,o]).range([p(s),p(o)]).clamp(!0),f=d3.svg.axis().scale(p).orient("bottom").ticks(e.ticksNumber).tickFormat(function(t){return t>0?t:t}).tickSize(10,10).tickPadding(5),g=d3.select(n).append("svg").attr("width",u+c.left+c.right).attr("height",d+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+-10+")");e.disabled&&g.attr("class","disabled"),g.append("g").attr("class","axis").attr("transform","translate(0,"+d/2+")").call(f).select(".domain").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","halo");var m=g.append("g").attr("class","curr-val-axis-grp").attr("transform","translate("+h(e.data.current)+","+d/2+")");m.append("line").attr("class","curr-val-axis-line").attr("x1","0").attr("y1","0").attr("x2","0").attr("y2","12"),m.append("text").text(e.data.current).attr("text-anchor","middle").attr("y","15").attr("dy","0.71em");var v=g.append("g"),y=d3.svg.brush().x(h).extent([e.data.current,e.data.current]).on("brush",t);v.attr("class","slider").call(y),v.selectAll(".extent, .resize").remove(),v.select(".background").attr("height",d);var x=[{x:p(s),y:d/2},{x:p(o),y:d/2}],b=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y});v.append("path").attr("d",b(x)).attr("class","brush").attr("transform","translate(0, 2)");var k=v.append("circle").attr("class","handle").attr("transform","translate(0,"+d/2+")").attr("r",8);v.insert("line",":first-child").attr("class","boundary-lines").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",20).attr("transform","translate("+h(s)+","+(d/2-10)+")"),v.insert("line",":first-child").attr("class","boundary-lines").attr("x1",10).attr("y1",0).attr("x2",10).attr("y2",20).attr("transform","translate("+(h(o)-10)+","+(d/2-10)+")"),v.insert("line",":first-child").attr("class","optimal-val").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",20).attr("transform","translate("+h(e.data.optimal)+","+(d/2-10)+")"),v.call(y.event).transition().duration(750).call(y.event);var w=d3.tip().attr("class","d3-tip").offset([-10,0]).html(Math.round(e.data.current)+e.data.units);g.call(w),k.on("mouseover",w.show).on("mouseout",w.hide),a.on("$destroy",function(){w.destroy()});var A=!0}}var n=a[0];e.ticksNumber=10,i(),angular.element(t).bind("resize",function(){t.innerWidth>=1024&&(i(),e.$digest())})}}}]),angular.module("ui.slimscroll",[]).directive("slimscroll",function(){return{restrict:"A",link:function(t,e,a){var r=[],i={},n=function(){a.slimscroll?i=t.$eval(a.slimscroll):a.slimscrollOption&&(i=t.$eval(a.slimscrollOption)),$(e).slimScroll({destroy:!0}),$(e).slimScroll(i)},s=function(){a.slimscroll&&!i.noWatch&&r.push(t.$watchCollection(a.slimscroll,n)),a.slimscrollWatch&&r.push(t.$watchCollection(a.slimscrollWatch,n)),a.slimscrolllistento&&r.push(t.$on(a.slimscrolllistento,n))},o=function(){$(e).slimScroll({destroy:!0}),r.forEach(function(t){t()}),r=null};r.push(t.$on("$destroy",o)),s()}}}),function(e){e.fn.extend({slimScroll:function(a){var r={width:"auto",height:"",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i=e.extend(r,a);return this.each(function(){function r(t){if(u){var t=t||window.event,a=0;t.wheelDelta&&(a=-t.wheelDelta/120),t.detail&&(a=t.detail/3);var r=t.target||t.srcTarget||t.srcElement;e(r).closest("."+i.wrapperClass).is(k.parent())&&n(a,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function n(t,e,a){b=!1;var r=t,n=k.outerHeight()-D.outerHeight();if(e&&(r=parseInt(D.css("top"))+t*parseInt(i.wheelStep)/100*D.outerHeight(),r=Math.min(Math.max(r,0),n),r=t>0?Math.ceil(r):Math.floor(r),D.css({top:r+"px"})),m=parseInt(D.css("top"))/(k.outerHeight()-D.outerHeight()),r=m*(k[0].scrollHeight-k.outerHeight()),a){r=t;var s=r/k[0].scrollHeight*k.outerHeight();s=Math.min(Math.max(s,0),n),D.css({top:s+"px"})}k.scrollTop(r),k.trigger("slimscrolling",~~r),l(),c()}function s(t){window.addEventListener?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener("mousewheel",r,!1)):document.attachEvent("onmousewheel",r)}function o(){g=Math.max(k.outerHeight()/k[0].scrollHeight*k.outerHeight(),x),D.css({height:g+"px"});var t=g==k.outerHeight()?"none":"block";D.css({display:t})}function l(){if(o(),clearTimeout(h),m==~~m){if(b=i.allowPageScroll,v!=m){var t=0==~~m?"top":"bottom";k.trigger("slimscroll",t)}}else b=!1;return v=m,g>=k.outerHeight()?void(b=!0):(D.stop(!0,!0).fadeIn("fast"),void(i.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function c(){i.alwaysVisible||(h=setTimeout(function(){i.disableFadeOut&&u||d||p||(D.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var u,d,p,h,f,g,m,v,y="<div></div>",x=30,b=!1,k=e(this);if(k.parent().hasClass(i.wrapperClass)){var w=k.scrollTop();if(D=k.siblings("."+i.barClass),S=k.siblings("."+i.railClass),o(),e.isPlainObject(a)){if("height"in a&&"auto"==a.height){k.parent().css("height","auto"),k.css("height","auto");var A=k.parent().parent().height();k.parent().css("height",A),k.css("height",A)}else if("height"in a){var T=a.height;k.parent().css("height",T),k.css("height",T)}if("scrollTo"in a)w=parseInt(i.scrollTo);else if("scrollBy"in a)w+=parseInt(i.scrollBy);else if("destroy"in a)return D.remove(),S.remove(),void k.unwrap();n(w,!1,!0)}}else if(!(e.isPlainObject(a)&&"destroy"in a)){i.height="auto"==i.height?k.parent().height():i.height;var L=e(y).addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height});k.css({overflow:"hidden",width:i.width,height:i.height});var S=e(y).addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.railBorderRadius,background:i.railColor,opacity:i.railOpacity,zIndex:90}),D=e(y).addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.borderRadius,BorderRadius:i.borderRadius,MozBorderRadius:i.borderRadius,WebkitBorderRadius:i.borderRadius,zIndex:99}),O="right"==i.position?{right:i.distance}:{left:i.distance};S.css(O),D.css(O),k.wrap(L),k.parent().append(D),k.parent().append(S),i.railDraggable&&D.bind("mousedown",function(a){var r=e(document);return p=!0,t=parseFloat(D.css("top")),pageY=a.pageY,r.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,D.css("top",currTop),n(0,D.position().top,!1)}),r.bind("mouseup.slimscroll",function(t){p=!1,c(),r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),S.hover(function(){l()},function(){c()}),D.hover(function(){d=!0},function(){d=!1}),k.hover(function(){u=!0,l(),c()},function(){u=!1,c()}),k.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(f=t.originalEvent.touches[0].pageY)}),k.bind("touchmove",function(t){if(b||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(f-t.originalEvent.touches[0].pageY)/i.touchScrollStep;n(e,!0),f=t.originalEvent.touches[0].pageY}}),o(),"bottom"===i.start?(D.css({top:k.outerHeight()-D.outerHeight()}),n(0,!0)):"top"!==i.start&&(n(e(i.start).position().top,null,!0),i.alwaysVisible||D.hide()),s(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),function(){function t(t,e,a,r,i,n,s){function o(t){if(t)return null!=t.match(/\.(jpeg|jpg|gif|png)$/)}var l=a.getObject("loginData");l&&(t.header={fullName:l.userFirstName,userImage:o(l.userImgUrl)?l.userImgUrl:"assets/images/dummy-photo.jpeg"}),t.logout=function(){t.currentState="login";var e=a.getAll();angular.forEach(e,function(t,e){a.remove(e)}),s.signoutRedirect(),r.authenticated=!1},t.gotoState=function(t){e.path(t).search({})},angular.element(i).bind("scroll",function(){i.scrollY>0?t.scrolledDown=!0:t.scrolledDown=!1,t.$apply()})}var e=angular.module("cyient",["ngRoute","ngResource","ngCookies","ngMessages","ngAnimate","ui.bootstrap.dropdown","cyient.backendservice","cyient.assetService","cyient.filters","ng.oidcclient","cyient.login","cyient.assetgroups","cyient.assetgroupdetails","cyient.assets","cyient.geography","cyient.assetdetails","cyient.insights","cyient.filters","cyient.miniLifechart","cyient.lifechart","cyient.loader"]);e.config(["$routeProvider",function(t){t.when("/login",{templateUrl:"templates/login/login.html",controller:"Login"}).when("/",{templateUrl:"templates/assetgroups/assetgroups.html",controller:"AssetGroups"}).when("/assetgroupdetails",{templateUrl:"templates/assetgroupdetails/assetgroupdetails.html",controller:"AssetGroupDetails"}).when("/assets",{templateUrl:"templates/assets/assets.html",controller:"Assets"}).when("/geography",{templateUrl:"templates/geography/geography.html",controller:"Geography"}).when("/assetdetails",{templateUrl:"templates/assetdetails/assetdetails.html",controller:"AssetDetails"}).when("/insights",{templateUrl:"templates/insights/insights.html",controller:"Insights"})}]),e.config(["ngOidcClientProvider",function(t){t.setSettings({authority:"https://fetidentitydev.azurewebsites.net",client_id:"js",redirect_uri:"http://localhost:1947/callback.html",response_type:"id_token token",scope:"openid profile api1",post_logout_redirect_uri:"http://localhost:1947/index.html"})}]),e.run(["$rootScope",function(t){t.currentState="/"}]),e.controller("Header",["$scope","$location","$cookies","LoginService","$window","$rootScope","ngOidcClient",t])}(),function(){function t(t,e,a,r,i,n,s,o,l,c){t.currentState="assetdetails",a.scrollTo(0,0);n.getObject("loginData");c.isAuthenticated()||(e.currentState="login",s.path("/login").search({})),e.currentCategories={sections:[]},e.SensorPositions={fracpump:{imageUrl:"assets/images/fracpump.png",sensors:[{y:22,x:255,name:"Outlet Pressure",deacription:"This is Sensor",state:"active"},{y:28,x:295,name:"Vibration 1",deacription:"This is Sensor",state:"active"},{y:131,x:122,name:"Vibration 2",deacription:"This is Sensor",state:"active"},{y:100,x:341,name:"Vibration 3",deacription:"This is Sensor",state:"active"},{y:111,x:165,name:"Vibration 4",deacription:"This is Sensor",state:"active"},{y:60,x:22,name:"Speed",deacription:"This is Sensor",state:"active"},{y:48,x:63,name:"Lube Pressure",deacription:"This is Sensor",state:"active"},{y:85,x:91,name:"Lube Temp In",deacription:"This is Sensor",state:"active"},{y:170,x:160,name:"Lube Temp Out",deacription:"This is Sensor",state:"active"}],consumables:[{y:97,x:254,name:"Consumables",deacription:"This is Consumable",state:"active"}]},catwalk:{imageUrl:"assets/images/catwalk-ad.png",sensors:[{y:330,x:382,name:"Main Arm Load Pin",deacription:"This is Sensor",state:"active"},{y:280,x:425,name:"Main Cylinder Pressure 1",deacription:"This is Sensor",state:"active"},{y:240,x:375,name:"Main Cylinder Pressure 2",deacription:"This is Sensor",state:"active"},{y:180,x:450,name:"HydraulicAux. System Pressure",deacription:"This is Sensor",state:"active"},{y:220,x:402,name:"Hydraulic Main System Pressure",deacription:"This is Sensor",state:"active"},{y:205,x:430,name:"Hydraulic Return Pressure",deacription:"This is Sensor",state:"active"},{y:190,x:510,name:"Hydraulic Flow",deacription:"This is Sensor",state:"active"},{y:10,x:490,name:"Skate Encoder",deacription:"This is Sensor",state:"active"},{y:307,x:405,name:"Main Arm Encoder",deacription:"This is Sensor",state:"active"},{y:135,x:565,name:"Current Meter",deacription:"This is Sensor",state:"active"}],consumables:[{y:110,x:536,name:"Return Filter Sensor",deacription:"This is Consumable",state:"active"},{y:120,x:507,name:"Main System Filter Sensor",deacription:"This is Consumable",state:"moderate"},{y:148,x:492,name:"Aux System Filter Pressure",deacription:"This is Consumable",state:"active"}]},ironroughneck:{imageUrl:"assets/images/roughneck.png",sensors:[{y:180,x:275,name:"Make-Up Pressure",deacription:"This is Sensor",state:"active"},{y:221,x:275,name:"Break-Out Pressure",deacription:"This is Sensor",state:"active"},{y:263,x:275,name:"System Pressure",deacription:"This is Sensor",state:"active"},{y:475,x:110,name:"Slew Encoder",deacription:"This is Sensor",state:"active"},{y:65,x:250,name:"Horizontal Position",deacription:"This is Sensor",state:"active"},{y:35,x:130,name:"Vertical Position",deacription:"This is Sensor",state:"active"},{y:99,x:143,name:"Spinner",deacription:"This is Sensor",state:"active"}],consumables:[{y:302,x:45,name:"Hydraulic Filter",deacription:"This is Consumable",state:"active"}]}},e.categoriesData={fracpump:{sections:[{sectionName:"Key Data Points",categories:[{categoryName:"Key Data Points",variables:[{name:"Pump_Efficiency",value:0,disName:"Pump Efficiency"},{name:"Piston_Accumulated_Travel",value:0,disName:"Piston Accumulated Travel"},{name:"CBM_InletPressure_Scale_Real",value:0,disName:"Inlet Pressure"},{name:"CBM_LubePressure_Scale_Real",value:0,disName:"Lube Pressure"},{name:"CBM_InletTemp_Scale_Real",value:0,disName:"Inlet Temperature"},{name:"CBM_OutletTemp_Scale_Real",value:0,disName:"Outlet Temperature"},{name:"CBM_OutletPressure_Scale_Real",value:0,disName:"Outlet Pressure"}],limiting:1}]},{sectionName:"Power End Categories",categories:[{categoryName:"Temperatures",variables:[{name:"CBM_InletTemp_Scale_Real",value:0,disName:"Inlet Temperature"},{name:"CBM_OutletTemp_Scale_Real",value:0,disName:"Outlet Temperature"}],limiting:1},{categoryName:"Vibrations",variables:[{name:"CBM_Vibration01_Scale_Real",value:0,disName:"Vibration-01"},{name:"CBM_Vibration02_Scale_Real",value:0,disName:"Vibration-02"},{name:"CBM_LubePressure_Scale_Real",value:0,disName:"Lube Pressure"}],limiting:1},{categoryName:"Pressures",variables:[{name:"CBM_LubePressure_Scale_Real",value:0,disName:"Lube Pressure"}],limiting:1}]},{sectionName:"Fluid End Categories",categories:[{categoryName:"Pressures",variables:[{name:"CBM_InletPressure_Scale_Real",value:0,disName:"Inlet Pressure"},{name:"CBM_OutletPressure_Scale_Real",value:0,disName:"Outlet Pressure"}],limiting:1},{categoryName:"Vibrations",variables:[{name:"CBM_Vibration03_Scale_Real",value:0,disName:"Vibration-03"},{name:"CBM_Vibration04_Scale_Real",value:0,disName:"Vibration-04"}],limiting:1}]}]},ironroughneck:{sections:[{sectionName:"Key Data Points",categories:[{categoryName:"Key Data Points",variables:[{name:"Cycles_Per_Day",value:0,disName:"Cycles Per Day"},{name:"MakeUp_Torque",value:0,disName:"MakeUp Torque"},{name:"BreakOut_Torque",value:0,disName:"BreakOut Torque"},{name:"Ambient_Temperature",value:0,disName:"Ambient Temperature"},{name:"Slip_Detection",value:0,disName:"Slip Detection"},{name:"MakeUp_Pressure",value:0,disName:"MakeUp Pressure"},{name:"BreakUp_Pressure",value:0,disName:"BreakUp Pressure"}],limiting:1}]},{sectionName:"Sensor Categories",categories:[{categoryName:"Temperatures",variables:[{name:"Ambient_Temperature",value:0,disName:"Ambient Temperature"}],limiting:1},{categoryName:"Pressures",variables:[{name:"MakeUp_Pressure",value:0,disName:"MakeUp Pressure"},{name:"BreakUp_Pressure",value:0,disName:"BreakUp Pressure"},{name:"System_Pressure",value:0,disName:"System Pressure"}],limiting:1},{categoryName:"Other Sensors",variables:[{name:"Slew_Encoder",value:0,disName:"Slew Encoder"},{name:"Horz_Encoder",value:0,disName:"Horizontal Encoder"},{name:"Vert_Encoder",value:0,disName:"Vertical Encoder"},{name:"Spinner_RPM",value:0,disName:"Spinner RPM"},{name:"Filter_Health",value:0,disName:"Filter Health"}],limiting:1}]}]},catwalk:{sections:[{sectionName:"Key Data Points",categories:[{categoryName:"Key Data Points",variables:[{name:"CBM_Hydraulic_Flow_Value",value:0,disName:"Hydraulic Flow"},{name:"CBM_HydroElec_Efficiency_Value",value:0,disName:"Hydro Electricity Efficiency"},{name:"CBM_Volumetric_Efficiency_Value",value:0,disName:"Volumetric Efficiency"},{name:"CBM_MainArm_Angle_Value",value:0,disName:"MainArm Angle"},{name:"CBM_Hydraulic_Fluid_Level",value:0,disName:"Hydraulic Fluid Level"},{name:"CBM_Asset_Temperature",value:0,disName:"Asset Temperature"},{name:"CBM_Skate_Position",value:0,disName:"Skate Position"},{name:"CBM_Trough_Load",value:0,disName:"Trough Load"},{name:"CBM_Main_Pressure_Value",value:0,disName:"Main Pressure"},{name:"CBM_Main_Arm_Cylinder_Pressure_1",value:0,disName:"Main Arm Cylinder Pressure 1"},{name:"CBM_Main_Arm_Cylinder_Pressure_2",value:0,disName:"Main Arm Cylinder Pressure 2"}],limiting:1}]},{sectionName:"Sensor Categories",categories:[{categoryName:"Temperatures",variables:[{name:"CBM_Ambient_Temp_Value",value:0,disName:"Ambient Temp"},{name:"CBM_Asset_Temperature",value:0,disName:"Asset Temperature"}],limiting:1},{categoryName:"Pressures",variables:[{name:"CBM_Auxiliary_Pressure_Value",value:0,disName:"Auxiliary Pressure"},{name:"CBM_Return_Pressure_Value",value:0,disName:"Return Pressure"},{name:"CBM_MainFilter_Pressure_Value",value:0,disName:"MainFilter Pressure"},{name:"CBM_AuxFilter_Pressure_Value",value:0,disName:"AuxFilter Pressure"},{name:"CBM_Main_Arm_Cylinder_Pressure_1",value:0,disName:"Main Arm Cylinder Pressure 1"},{name:"CBM_Main_Arm_Cylinder_Pressure_2",value:0,disName:"Main Arm Cylinder Pressure 2"},{name:"CBM_Return_Filter_Pressure",value:0,disName:"Return Filter Pressure"}],limiting:1},{categoryName:"Other Sensors",variables:[{name:"CBM_System_Current_Value",value:0,disName:"System Current"},{name:"CBM_Hydraulic_Flow_Value",value:0,disName:"Hydraulic Flow"},{name:"CBM_Hydraulic_Fluid_Level",value:0,disName:"Hydraulic Fluid Level"}],limiting:1}]}]}},l.onmessage(function(t){var a=JSON.parse(t.data);e.currentCategories.sections.length&&e.currentCategories.sections.forEach(function(t){t.categories.forEach(function(t){t.variables.forEach(function(t){var e=t.name;t.value=a[e]})})}),e.$apply()});var u,d=s.search(),p=d.truckId;u=d.assetType?d.assetType:null,e.truckdetails={},e.truckdetails.showRODGraph=!1,e.truck={truckData:[],healthGraphData:[],deteriorationGraphData:[],showTruckDetails:!1,mainTruckCategories:[]},e.showImgSection=!0,o.getTruck(p,u).then(function(t){var a=t;if(t&&a){if(e.truck.showTruckDetails=!0,e.truck.truckData=a[0],"catwalk"==e.truck.truckData.assetType){var r=e.truck.truckData.assetHealthData.splice(6,e.truck.truckData.assetHealthData.length);e.truck.truckData.assetMetaData=r.concat(e.truck.truckData.assetMetaData)}e.currentCategories=e.categoriesData[e.truck.truckData.assetType],o.getChartData(p,u).then(function(t){e.truck.healthGraphDatas=t,e.truck.healthGraphDatas.forEach(function(t){}),e.truck.truckData.deteriorationGraphs&&e.truck.truckData.deteriorationGraphs.length&&e.truck.truckData.deteriorationGraphs.forEach(function(t){})})}}),e.openInsights=function(t,a,r){a=a||"";var i=e.currentCategories.sections[r].categories[t].categoryName,n=_.chain(e.currentCategories.sections[r].categories[t].variables).filter(function(t){return t}).map(function(t){return{name:t.name,displayName:t.disName}}).uniq().value();s.path("/insights").search({siteId:e.truck.truckData.siteId,truckId:e.truck.truckData.assetId,assetName:e.truck.truckData.assetName,categories:n,categoryId:i,assetType:e.truck.truckData.assetType})},e.toggleToolTip=function(t){e.showTooltip=t},e.switchDetails=function(t,a){e.x=t.x,e.y=t.y,e.sensorName=t.name,e.showPreviewTooltip=!0},e.closeAssetPreviewTooltp=function(t){e.showPreviewTooltip=!1},e.changeLimit=function(t){1==t.limiting?t.limiting=99:t.limiting=1},e.navigateToAssetsList=function(){var t={};e.data="",t.assetGrpType=e.truck.truckData.siteType,t.assetGrpName=e.truck.truckData.siteName,t.assetGrpId=e.truck.truckData.siteId,t.navigateDirectly=!0,s.path("/").search(t)}}angular.module("cyient.assetdetails",["ngAnimate"]).controller("AssetDetails",t),t.$inject=["$rootScope","$scope","$window","$http","$log","$cookies","$location","TruckDetailsService","SocketAPIService","LoginService"]}(),function(){function t(t,e,a,r,i,n,s,o,l,c){t.currentState="assetgroupdetails";var u=Object.keys(o.getData()).length;u?o.getData():i.getObject("loginData");o.isAuthenticated()||(e.currentState="login",r.path("/login").search({})),e.frackList=[],e.rigList=[];var d=r.search();if(d){e.currentSiteType=d.assetGrpType,e.currentSiteGroup=d;var p=s.localStorage.getItem("assetGroups")||"[]";p=JSON.parse(p),p&&p.length&&(e.frackList=p.filter(function(t){return"frac"==t.assetGrpType}),e.rigList=p.filter(function(t){return"rig"==t.assetGrpType}))}e.rigAvgData=[{name:"ROD",displayName:"Avg. ROD",value:0,units:"percentage"}],e.fracsiteData=[],e.getAssetList=function(t){c.getAssetGrp(t).then(function(t){e.fracsiteData=t,void 0,e.currentSiteGroup.assetGrpType&&(e.rigAvgHealth=0,e.rigAvgROD=0,e.fracsiteData.forEach(function(t){e.rigAvgHealth+=t.assetsData[0].healthPercentage,"rig"==e.currentSiteGroup.assetGrpType&&t.assetsData[0].metaData.forEach(function(t){"ROD"==t.name&&(e.rigAvgROD+=t.value)}),"frac"==e.currentSiteGroup.assetGrpType&&t.assetGrpMetaData.forEach(function(t){"ROD"==t.name&&(t.displayName="Avg. ROD",t.units="percentage")})}),e.rigAvgROD=e.rigAvgROD/e.fracsiteData.length,e.rigAvgHealth=e.rigAvgHealth/e.fracsiteData.length,e.rigAvgData.forEach(function(t){"ROD"==t.name&&(t.value=e.rigAvgROD)}))})},e.getAssetList(d.assetGrpId),e.gotoSiteDetails=function(t,a,i){var n={};t&&(n.category=t),n.siteId=e.fracsiteData[0].assetGrpId,n.assetName=e.fracsiteData[0].assetGrpType,n.assetLocation=e.fracsiteData[0].assetGrpName,a&&(n.truckId=a,n.navigateDirectly=!0),r.path("/assets").search(n)},e.changeDropdown=function(t){e.currentSiteGroup=t,e.fracsiteData=null,e.getAssetList(t.assetGrpId)},e.navigateBack=function(){r.path("/").search({})},e.openExpandedTruck=function(t,e){void 0,"frac"==e&&(e="fracpump"),r.path("/assetdetails").search({truckId:t,assetType:e}),angular.element(".scroll-body").css("display","none")}}angular.module("cyient.assetgroupdetails",["cyient.progressbar","cyient.progressarc"]).controller("AssetGroupDetails",t),t.$inject=["$rootScope","$scope","$http","$location","$cookies","$log","$window","LoginService","AllAssetsService","AllSitesService"]}(),function(){function t(t,e,a,r,i,n,s,o){function l(){t.tabs.activeTab="All",t.tabs.all=t.trucks.exhaustiveList.length,t.tabs.fracpumps=t.trucks.exhaustiveList.filter(function(t){return t.assets.some(function(t){return"fracpump"==t.name&&t.value>=1})}).length,t.tabs.roughneck=t.trucks.exhaustiveList.filter(function(t){return t.assets.some(function(t){return"roughneck"==t.name&&t.value>=1})}).length,t.tabs.catwalk=t.trucks.exhaustiveList.filter(function(t){return t.assets.some(function(t){return"catwalk"==t.name&&t.value>=1})}).length,t.tabs.monitor=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage>20&&t.healthPercentage<=80}).length,t.tabs.good=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage>80}).length,t.tabs.critical=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage<=20}).length}function c(t,e){return"good"==e?t>80:"monitor"==e?t>20&&t<=80:"critical"==e?t<=20:void 0}return e.currentState="/",t.trucks={},t.tabs={},e.currentSiteGroup={},o.isAuthenticated()?(n.scrollTo(0,0),angular.element(n).bind("scroll",function(){n.scrollY>0?t.scrolledDown=!0:t.scrolledDown=!1,t.$apply()}),s.getSites().then(function(e){e&&(t.trucks.list=e,n.localStorage.setItem("assetGroups",JSON.stringify(t.trucks.list)),t.trucks.exhaustiveList=e,l())}),t.trucks={list:[],exhaustiveList:[],parameterInsights:{},isOrder:!1,"trucks.orderSymbol":"+",selectedType:"operationalDate",selectedText:"Operational Date",filterSelectedText:"All Asset Groups",category:"All"},t.$watch("trucks.selectedType",function(e,a){t.trucks.isOrder=!1},!0),t.toggleOrder=function(){t.trucks.isOrder=!t.trucks.isOrder,t.trucks.isOrder===!1?t.trucks.orderSymbol="+":t.trucks.orderSymbol="-"},t.trucks.selectedOption=function(e,a){t.trucks.selectedType=e,t.trucks.selectedText=a},t.trucks.filterSelectedOption=function(e,a){t.trucks.filterSelectedText=a},t.filterAssets=function(e,a){return t.tabs.activeTab=a,"All"==e?void(t.trucks.list=t.trucks.exhaustiveList):"health"==e?void(t.trucks.list=t.trucks.exhaustiveList.filter(function(t){return c(t.healthPercentage,a)})):void("asset"==e&&(t.trucks.list=t.trucks.exhaustiveList.filter(function(t){return t.assets.some(function(t){return t.name==a&&t.value>=1})})))},void(t.openExpandedTruck=function(t){var e=t;void 0,i.path("/assetgroupdetails").search(e)})):(e.currentState="login",void i.path("/login").search({}))}angular.module("cyient.assetgroups",["cyient.progressarc","ngRoute"]).controller("AssetGroups",t),t.$inject=["$scope","$rootScope","$http","$log","$location","$window","AllSitesService","LoginService"]}(),function(){function t(t,e,a,r,i,n,s,o,l){function c(){t.tabs.all=t.trucks.exhaustiveList.length,t.tabs.fracpumps=t.trucks.exhaustiveList.filter(function(t){return"fracpump"==t.assetType}).length,t.tabs.roughneck=t.trucks.exhaustiveList.filter(function(t){return"ironroughneck"==t.assetType}).length,t.tabs.catwalk=t.trucks.exhaustiveList.filter(function(t){return"catwalk"==t.assetType}).length,t.tabs.monitor=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage>20&&t.healthPercentage<=80}).length,t.tabs.good=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage>80}).length,t.tabs.critical=t.trucks.exhaustiveList.filter(function(t){return t.healthPercentage<=20}).length}function u(t,e){return"good"==e?t>80:"monitor"==e?t>20&&t<=80:"critical"==e?t<=20:void 0}e.currentState="assets",t.trucks={};var d=i.search();d||(d={}),t.tabs={activeTab:"All"},t.singleSiteData=!1,t.assetTypeName="",e.expandTruck=!1,e.collapseExpanded=!1,e.siteCardSectionActive=!1,e.showView="",l.isAuthenticated()||(t.currentState="login",i.path("/login").search({})),n.scrollTo(0,0),angular.element(n).bind("scroll",function(){n.scrollY>0?t.scrolledDown=!0:t.scrolledDown=!1,t.$apply()}),n.localStorage.removeItem("trucksList"),t.trucks={list:[],exhaustiveList:[],parameterInsights:{},isOrder:!1,"trucks.orderSymbol":"+",selectedType:"RUL",selectedText:"RUL",filterSelectedText:"All Assets",category:"All"},d&&"All"===d.category?t.tabs.activeTab="frac"==d.assetName?"fracpump":d.assetName:d&&"Critical"===d.category?t.tabs.activeTab="critical":d&&"Stable"===d.category?t.tabs.activeTab="monitor":d&&"Good"===d.category&&(t.tabs.activeTab="good"),t.trucks.category=d.category||"All",d.siteId&&(t.singleSiteData=!0,t.siteId=d.siteId,t.assetLocation=d.assetLocation,t.assetTypeName="frac"==d.assetName?"fracpump":d.assetName);var p=(s.getObject("loginData"),{});d.siteId&&(p.siteId=d.siteId),o.getSites(p).then(function(e){if(e){var a=e;a.forEach(function(t){t.progressGraph.graphData[1].xAxis=t.smh,t.progressGraph.xAxisToday=t.smh}),n.localStorage.setItem("trucksList",JSON.stringify(a)),t.singleSiteData?(t.trucks.exhaustiveList=a.filter(function(e){return e.siteId==t.siteId}),t.trucks.list=t.trucks.exhaustiveList,d&&d.category&&"All"!=d.category&&t.filterAssets("health",t.tabs.activeTab)):(t.trucks.exhaustiveList=a,t.trucks.list=t.trucks.exhaustiveList),c()}}),t.openExpandedTruck=function(a,r){t.openExpanded(),e.showView="overview-expand",i.path("/assetdetails").search({truckId:a.assetId,assetType:a.assetType}),angular.element(".scroll-body").css("display","none")},t.trucks.setActive=function(e){t.trucks.activeMenuItem=e},t.openExpanded=function(){e.siteCardSectionActive=!0,e.collapseExpanded=!0,e.expandTruck=!0},t.trucks.goToDashboard=function(){},t.trucks.retrieveAllTrucks=function(){SiteDetailsService.getAllTrucks(d.siteID,"all").then(function(e){"ERROR"!==e.data.status&&(t.trucks.list=e.data.result)})},t.$watch("trucks.selectedType",function(e,a){t.trucks.isOrder=!1},!0),t.toggleOrder=function(){t.trucks.isOrder=!t.trucks.isOrder,t.trucks.isOrder===!1?t.trucks.orderSymbol="+":t.trucks.orderSymbol="-"},t.trucks.selectedOption=function(e,a){t.trucks.selectedType=e,t.trucks.selectedText=a},t.trucks.filterSelectedOption=function(e,a){t.trucks.filterSelectedText=a},t.filterAssets=function(e,a){return t.tabs.activeTab=a,"All"==e?void(t.trucks.list=t.trucks.exhaustiveList):"health"==e?void(t.trucks.list=t.trucks.exhaustiveList.filter(function(t){return u(t.healthPercentage,a)})):void("asset"==e&&(t.trucks.list=t.trucks.exhaustiveList.filter(function(t){return t.assetType==a})))},t.closeExpanded=function(t){e.siteCardSectionActive=!1,e.expandTruck=!1,e.collapseExpanded=!1,angular.element(".scroll-body").css("height",""),angular.element(".sites-card").removeClass("selected"),TruckDetailsService.cancelRequest()},t.openCollapsedExpandedTruck=function(){e.collapseExpanded=!0,angular.element(".whatif-collapse").removeClass("whatif-collapse--modified"),angular.element(".scroll-body").css("display","none")},t.closeCollapsedExpandedTruck=function(){e.collapseExpanded=!1,angular.element(".scroll-body").css("display","block"),angular.element(".whatif-collapse").addClass("whatif-collapse--modified")},t.trucks.retrieveAllTrucksList=function(e,a){t.tabs={},t.tabs.activeTab="All",t.trucks.category="All",t.trucks.list=JSON.parse(n.localStorage.getItem("trucksList"))},t.trucks.retrieveCriticalTrucksList=function(e,a){t.tabs={},t.tabs.activeTab="critical",t.trucks.category="Critical";var i=n.localStorage.getItem("trucksList");r.log(i),t.trucks.list=JSON.parse(n.localStorage.getItem("trucksList")),t.trucks.list=t.trucks.list.filter(function(t){return t.category===a})},t.trucks.retrieveStableTrucksList=function(e,a){t.tabs={},t.tabs.activeTab="monitor",t.trucks.category="Stable",t.trucks.list=JSON.parse(n.localStorage.getItem("trucksList")||"{}"),t.trucks.list=t.trucks.list.filter(function(t){return t.category===a})},t.trucks.retrieveGoodTrucksList=function(e,a){t.tabs={},t.tabs.activeTab="good",t.trucks.category="Good",t.trucks.list=JSON.parse(n.localStorage.getItem("trucksList")),t.trucks.list=t.trucks.list.filter(function(t){return t.category===a})},t.filterTrucks=function(e){var a="All"===t.trucks.category||e.category===t.trucks.category;return a}}angular.module("cyient.assets",["cyient.progressarc"]).controller("Assets",t),t.$inject=["$scope","$rootScope","$http","$log","$location","$window","$cookies","AllAssetsService","LoginService"]}(),function(){function t(t,e,a,r,i,n,s,o,l){function c(){t.geoData.forEach(function(e){"frac"==e.siteType&&(t.fpData.total=t.fpData.total+(e.assetsData[0].fracpump.totalAssets||0),t.fpData.critical=t.fpData.critical+(e.assetsData[0].fracpump.critical||0),t.fpData.list.push(e)),"rig"==e.siteType&&(e.assetsData[0].catwalk&&(t.cwData.total=t.cwData.total+(e.assetsData[0].catwalk.totalAssets||0),t.cwData.critical=t.cwData.critical+(e.assetsData[0].catwalk.critical||0)),t.cwData.list.push(e),e.dataToShowOnHover=e.dataToShowOnHover.filter(function(t){return"RUL"!=t.name}))})||[],u()}function u(){for(var e=0;e<t.geoData.length;e++){for(var a=t.geoData[e],r='<div class="map-tooltip" id="geo-tooltip" ><div class="map-tooltip-section heading"><span>'+a.location+' </span><span class="map-tooltip-location"><svg><use xlink:href="#location"></use></svg></span></div><div class="map-tooltip-section"><div><div class="map-tt-heading">Name: <span class="map-tt-value">'+a.siteName+"</span></div></div></div>",i=0;i<a.dataToShowOnHover.length;i++){if("health"==a.dataToShowOnHover[i].name||"ROD"==a.dataToShowOnHover[i].name||"RUL"==a.dataToShowOnHover[i].name)var n=a.dataToShowOnHover[i].value.toFixed(2);else if("operationaldate"==a.dataToShowOnHover[i].name)var s=new Date(a.dataToShowOnHover[i].value),n=s.getDate()+"-"+s.getMonth()+"-"+s.getFullYear();else var n=a.dataToShowOnHover[i].value;
r+='<div class="map-tooltip-section" ><div><span class="map-tt-heading">'+a.dataToShowOnHover[i].displayName+': </span><span class="map-tt-value">'+n+"</span></div></div>"}if(r+='<span class="tip"></span><span class="tip-right"></span></div>',"Good"==a.category)var o=L.divIcon({className:"ship-div-icon",html:'<span style="fill:green"><svg><use xlink:href="#map-pin"></use></svg></span>',iconSize:[25,60]});else if("Stable"==a.category)var o=L.divIcon({className:"ship-div-icon",html:'<span style="fill:orange"><svg><use xlink:href="#map-pin"></use></svg></span>',iconSize:[25,60]});else if("Critical"==a.category)var o=L.divIcon({className:"ship-div-icon",html:'<span style="fill:red"><svg><use xlink:href="#map-pin"></use></svg></span>',iconSize:[25,60]});var l=1;"all"!=v&&v!=a.siteType&&(l=.5);var c=d();g[c]=L.marker([a.coordinates.x,a.coordinates.y],{icon:o,draggable:!0,opacity:l}).addTo(f).bindPopup(r).on("mouseover",function(t){this.openPopup()}).on("mouseout",function(t){this.closePopup()}).on("click",function(e){var a=e.target;t.navigateToAssetsList(a.jdata)}),g[c].jdata=a}}function d(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}e.currentState="geography",t.mapviews=[{name:"OpenStreetMap",displayName:"Street View",url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"},{name:"WorldImagery",displayName:"Territory View",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}];for(var p={},h=0;h<t.mapviews.length;h++)p[t.mapviews[h].name]=t.mapviews[h].url;t.currentAsset="all",t.wData={current:!0,id:"all"},t.fpData={list:[],displayName:"Frac Pump",name:"fracpump",id:"frac",total:0,current:!1,critical:0},t.cwData={list:[],displayName:"CatWalk",name:"catwalk",id:"rig",total:0,current:!1,critical:0},t.getGeoData=function(){s.getGeoData().then(function(e){t.geoData=e,c()})};var f=null;t.changeLocation=function(e){t.currentAsset=e.id,t.wData.current=!1,t.cwData.current=!1,t.fpData.current=!1,e.current=!0,v=e.id;for(var a in g)f.removeLayer(g[a]);g={},u()};var g={},f=L.map("map").setView([37.0902,-95.7129],5),m=L.tileLayer(p.OpenStreetMap,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',noWrap:!0});m.addTo(f),$(".view").on("change",function(){var t=$(this).val();m.setUrl(p[t])});var v="all";t.navigateToAssetsList=function(t){var e={};e.assetGrpType=t.siteType,e.assetGrpName=t.assetName,e.assetGrpId=t.siteId,e.navigateDirectly=!0,r.path("/assetgroupdetails").search(e)},t.getGeoData()}angular.module("cyient.geography",["cyient.progressbar","cyient.progressarc"]).controller("Geography",t),t.$inject=["$scope","$rootScope","$http","$location","$cookies","$log","GeographyService","LoginService","SiteDetailsService"]}(),function(){function t(t,e,a,r,i,n,s,o){o.currentState="insights",t.ins={},s.scrollTo(0,0);var l=a.getObject("loginData"),c=e.search();l.userId,c.siteId;t.truckId=c.truckId,t.partName=c.partName,t.categories=c.categories,t.categoryId=c.categoryId,t.variableName=c.variableName,t.assetType=c.assetType,t.popupData={},t.currIndex=_.findIndex(t.categories,function(e){return e===t.categoryName}),t.currIndex===-1&&(t.currIndex=0),t.goToState=function(t){e.path(t)},t.changeCategory=function(e){t.currIndex=e,t.getCategoryData(t.categories[t.currIndex])},t.firstTimeCall=!0,t.$on("ngRepeatFinished",function(e){r(function(){t.firstTimeCall=!1},2e3)}),t.showGraphPopup=function(e){n.log(e);var a=l.userId,r=r,s=t.categoryId,o=t.truckId,c=t.assetType,u=[e.name];i.getDaysData(a,r,s,c,o,u).then(function(a){var r=a[0];t.popupData.minOptimal=r.minOptimal,t.popupData.maxOptimal=r.maxOptimal,t.popupData.xLabel=r.xLabel,t.popupData.yLabel=r.yLabel,t.popupData.popupLineGraph=r.variableGraph;for(var i=Date.now(),n=r.variableGraph.length,s=n;s>0;s--)i-=18e7,t.popupData.popupLineGraph[s-1].xValue=i;e.showPopup=!0})},t.closePopup=function(e){e.showPopup=!1,t.popupData={}},t.getCategoryData=function(e){var a=l.userId,r=r,s=t.categoryId,o=t.truckId,c=t.assetType,u=_.chain(t.categories).filter(function(t){return t}).map(function(t){return t.name}).uniq().value();i.getData(a,r,o,s,c,u).then(function(a){"ERROR"!==a.status&&(t.variables=a.map(function(t){var a={};a.name=t.variableName,a.displayName=e.filter(function(t){return t.name==a.name}),a.paramtype=t.paramtype,a.duration=t.duration,a.varTrend=t.varTrend,a.lineGraph=t.variableGraph;for(var r=Date.now(),i=a.lineGraph.length,n=i;n>0;n--)r-=1e4,a.lineGraph[n-1].xValue=r;return a.Graph=a.lineGraph,a.minOptimal=t.minOptimal,a.maxOptimal=t.maxOptimal,a.xLabel=t.xLabel,a.yLabel=t.yLabel,"Total"===t.paramtype?a.totalObj=t.totalObj:"Avg"===t.paramtype?a.avgObj=t.avgObj:"Overload"===t.paramtype&&(a.overLoadObj=t.overLoadObj),a}))},function(t){n.warn(t)})},t.navigateToOverview=function(){e.path("/assetdetails").search({truckId:t.truckId,assetType:t.assetType})},t.getCategoryData(t.categories)}angular.module("cyient.insights",["cyient.areachart","cyient.barcharthoriz","cyient.donut","cyient.onfinishrender","cyient.popup","cyient.scrolltowhen"]).controller("Insights",t),t.$inject=["$scope","$location","$cookies","$timeout","InsightsService","$log","$window","$rootScope"]}(),function(){function t(t,e,a,r,i,n,s,o,l){function c(){l.manager.getUser().then(function(e){if(e){e.profile.Authorization=e.token_type+" "+e.access_token,s.warn("User logged in",e.profile),t.userData={Authorization:e.token_type+" "+e.access_token,firstName:e.profile.name,lastName:e.profile.name,userId:e.profile.sub,userName:e.profile.preferred_username},n.authenticated=!0,n.setData(t.userData),i.putObject("login-token",e.token_type+" "+e.access_token);var a={userId:t.userData.userId,userFirstName:t.userData.firstName,userLastName:t.userData.lastName,userName:t.userData.userName,userImgUrl:""};i.putObject("loginData",a),r.path("/").search({})}else s.warn("User not logged in"),angular.forEach(i,function(t,e){i.remove(e)})})}e.currentState="login",t.header=!1,t.credentials={username:"Shane.Richard@f-e-t.com",password:"R$hane123"},t.messages={invalidUser:!1,emailSent:!1,isLoginProgress:!1,loginError:null},t.token="Bearer  eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJTaGFuZS5SaWNoYXJkQGYtZS10LmNvbSIsImV4cCI6MTUzNDY3MzQ5Mn0.Bg8xVnrRDCALnXGTHGR0nTHXR8VwjcnIbPZ6jG29fdJ-2_PuPHjb1FfM2b9x_7qbqOSTLM3por5N_YdE5wgulg",c(),t.oldLogin=function(){t.messages.isLoginProgress=!0;var e=t.credentials.username,a=t.credentials.password;if(t.messages.loginError=null,e&&a){var r={userName:e,password:a};n.getUserDetails(r).then(function(e){if(e){t.userData=e,n.setData(t.userData);var a={userId:t.userData.userId,userFirstName:t.userData.firstName,userLastName:t.userData.lastName,userName:t.userData.userName,userImgUrl:""};i.putObject("loginData",a),$state.go("cyient.protected.allsites",{authStatus:!0})}else t.messages.loginError="Can not login at this moment"},function(){t.messages.loginError="Can not login at this moment"})["catch"](function(e){s.warn("Cannot login at this moment ..."),t.messages.loginError="Cannot login at this moment"})["finally"](function(){t.messages.isLoginProgress=!1})}else t.messages={},t.messages.invalidUser=!0},t.login=function(){l.signinRedirect()},t.forgotPassword=function(){var e=t.credentials.username;e&&n.forgotPassword(e).then(function(e){e&&(t.messages={},t.messages.emailSent=!0)})},t.getPath=function(t){var t=t,e=AssetService.getAssetPath(t);return e}}angular.module("cyient.login",[]).controller("Login",t),t.$inject=["$scope","$rootScope","$http","$location","$cookies","LoginService","$log","$window","ngOidcClient"]}();
//# sourceMappingURL=scripts.min.js.map
